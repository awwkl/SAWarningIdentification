GitDiffStart: 6ef174f52737b37e8b0625208ccc7cc64c3bd5b0 | Tue Jun 21 05:03:15 2016 -0400
diff --git a/lucene/CHANGES.txt b/lucene/CHANGES.txt
index 0c5df66..a401964 100644
--- a/lucene/CHANGES.txt
+++ b/lucene/CHANGES.txt
@@ -27,6 +27,10 @@ New Features
   recording key/values from a provided iterable based on when the
   commit actually takes place (Mike McCandless)
 
+* LUCENE-7287: UkrainianMorfologikAnalyzer is a new dictionary-based
+  analyzer for the Ukrainian language (Andriy Rysin via Mike
+  McCandless)
+
 Bug Fixes
 
 * LUCENE-6662: Fixed potential resource leaks. (Rishabh Patel via Adrien Grand)
diff --git a/lucene/analysis/morfologik/src/java/org/apache/lucene/analysis/uk/UkrainianMorfologikAnalyzer.java b/lucene/analysis/morfologik/src/java/org/apache/lucene/analysis/uk/UkrainianMorfologikAnalyzer.java
new file mode 100644
index 0000000..aa501d2
--- /dev/null
+++ b/lucene/analysis/morfologik/src/java/org/apache/lucene/analysis/uk/UkrainianMorfologikAnalyzer.java
@@ -0,0 +1,154 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.lucene.analysis.uk;
+
+
+import java.io.IOException;
+import java.io.Reader;
+import java.nio.charset.StandardCharsets;
+
+import org.apache.lucene.analysis.Analyzer;
+import org.apache.lucene.analysis.CharArraySet;
+import org.apache.lucene.analysis.LowerCaseFilter;
+import org.apache.lucene.analysis.StopFilter;
+import org.apache.lucene.analysis.StopwordAnalyzerBase;
+import org.apache.lucene.analysis.TokenStream;
+import org.apache.lucene.analysis.Tokenizer;
+import org.apache.lucene.analysis.WordlistLoader;
+import org.apache.lucene.analysis.charfilter.MappingCharFilter;
+import org.apache.lucene.analysis.charfilter.NormalizeCharMap;
+import org.apache.lucene.analysis.miscellaneous.SetKeywordMarkerFilter;
+import org.apache.lucene.analysis.morfologik.MorfologikFilter;
+import org.apache.lucene.analysis.snowball.SnowballFilter;
+import org.apache.lucene.analysis.standard.StandardFilter;
+import org.apache.lucene.analysis.standard.StandardTokenizer;
+import org.apache.lucene.util.IOUtils;
+
+import morfologik.stemming.Dictionary;
+
+/**
+ * A dictionary-based {@link Analyzer} for Ukrainian.
+ */
+public final class UkrainianMorfologikAnalyzer extends StopwordAnalyzerBase {
+  private final CharArraySet stemExclusionSet;
+  
+  /** File containing default Ukrainian stopwords. */
+  public final static String DEFAULT_STOPWORD_FILE = "/org/apache/lucene/analysis/uk/stopwords.txt";
+  
+  /**
+   * Returns an unmodifiable instance of the default stop words set.
+   * @return default stop words set.
+   */
+  public static CharArraySet getDefaultStopSet(){
+    return DefaultSetHolder.DEFAULT_STOP_SET;
+  }
+  
+  /**
+   * Atomically loads the DEFAULT_STOP_SET in a lazy fashion once the outer class 
+   * accesses the static final set the first time.;
+   */
+  private static class DefaultSetHolder {
+    static final CharArraySet DEFAULT_STOP_SET;
+
+    static {
+      try {
+        DEFAULT_STOP_SET = WordlistLoader.getSnowballWordSet(IOUtils.getDecodingReader(SnowballFilter.class, 
+            DEFAULT_STOPWORD_FILE, StandardCharsets.UTF_8));
+      } catch (IOException ex) {
+        // default set should always be present as it is part of the
+        // distribution (JAR)
+        throw new RuntimeException("Unable to load default stopword set");
+      }
+    }
+  }
+
+  /**
+   * Builds an analyzer with the default stop words: {@link #DEFAULT_STOPWORD_FILE}.
+   */
+  public UkrainianMorfologikAnalyzer() {
+    this(DefaultSetHolder.DEFAULT_STOP_SET);
+  }
+  
+  /**
+   * Builds an analyzer with the given stop words.
+   * 
+   * @param stopwords a stopword set
+   */
+  public UkrainianMorfologikAnalyzer(CharArraySet stopwords) {
+    this(stopwords, CharArraySet.EMPTY_SET);
+  }
+
+  /**
+   * Builds an analyzer with the given stop words. If a non-empty stem exclusion set is
+   * provided this analyzer will add a {@link SetKeywordMarkerFilter} before
+   * stemming.
+   * 
+   * @param stopwords a stopword set
+   * @param stemExclusionSet a set of terms not to be stemmed
+   */
+  public UkrainianMorfologikAnalyzer(CharArraySet stopwords, CharArraySet stemExclusionSet) {
+    super(stopwords);
+    this.stemExclusionSet = CharArraySet.unmodifiableSet(CharArraySet.copy(stemExclusionSet));
+  }
+
+  @Override
+  protected Reader initReader(String fieldName, Reader reader) {
+    NormalizeCharMap.Builder builder = new NormalizeCharMap.Builder();
+    builder.add("\u2019", "'");
+    builder.add("\u02BC", "'");
+    builder.add("\u0301", "");
+    NormalizeCharMap normMap = builder.build();
+
+    reader = new MappingCharFilter(normMap, reader);
+    return reader;
+  }
+
+  /**
+   * Creates a
+   * {@link org.apache.lucene.analysis.Analyzer.TokenStreamComponents}
+   * which tokenizes all the text in the provided {@link Reader}.
+   * 
+   * @return A
+   *         {@link org.apache.lucene.analysis.Analyzer.TokenStreamComponents}
+   *         built from an {@link StandardTokenizer} filtered with
+   *         {@link StandardFilter}, {@link LowerCaseFilter}, {@link StopFilter}
+   *         , {@link SetKeywordMarkerFilter} if a stem exclusion set is
+   *         provided and {@link MorfologikFilter} on the Ukrainian dictionary.
+   */
+  @Override
+  protected TokenStreamComponents createComponents(String fieldName) {
+    Tokenizer source = new StandardTokenizer();
+    TokenStream result = new StandardFilter(source);
+    result = new LowerCaseFilter(result);
+    result = new StopFilter(result, stopwords);
+
+    if (stemExclusionSet.isEmpty() == false) {
+      result = new SetKeywordMarkerFilter(result, stemExclusionSet);
+    }
+
+    result = new MorfologikFilter(result, getDictionary());
+    return new TokenStreamComponents(source, result);
+  }
+
+  private static Dictionary getDictionary() {
+    try {
+      return Dictionary.read(UkrainianMorfologikAnalyzer.class.getResource("/org/apache/lucene/analysis/uk/ukrainian.dict"));
+    } catch (IOException e) {
+      throw new RuntimeException(e);
+    }
+  }
+}
diff --git a/lucene/analysis/morfologik/src/java/org/apache/lucene/analysis/uk/package-info.java b/lucene/analysis/morfologik/src/java/org/apache/lucene/analysis/uk/package-info.java
new file mode 100644
index 0000000..d6bd8c7
--- /dev/null
+++ b/lucene/analysis/morfologik/src/java/org/apache/lucene/analysis/uk/package-info.java
@@ -0,0 +1,21 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+/**
+ * Analyzer for Ukrainian.
+ */
+package org.apache.lucene.analysis.uk;
diff --git a/lucene/analysis/morfologik/src/resources/org/apache/lucene/analysis/uk/stopwords.txt b/lucene/analysis/morfologik/src/resources/org/apache/lucene/analysis/uk/stopwords.txt
new file mode 100644
index 0000000..651776b
--- /dev/null
+++ b/lucene/analysis/morfologik/src/resources/org/apache/lucene/analysis/uk/stopwords.txt
@@ -0,0 +1,1269 @@
+а
+аби
+абиде
+абиколи
+абик?ди
+аби??о
+абикого
+абиком?
+абиким
+аби?ий
+аби?ийого
+аби?и?м?
+аби?ийом?
+аби?и?м
+аби?и?
+аби?и??
+аби?и?й
+аби?и?
+аби?и??
+аби?и?
+аби?и?
+аби?и??
+аби?и?ми
+аби?о
+аби?ого
+аби?ом?
+аби?им
+аби?кий
+аби?кого
+аби?ком?
+аби?ким
+аби?к?м
+аби?ка
+аби?ко?
+аби?к?й
+аби?к?
+аби?ко?
+аби?ке
+аби?к?
+аби?ки?
+аби?кими
+або
+або?о
+авжеж
+аво??
+ага
+адже
+аж
+ажен?
+але
+ам?н?
+ан?
+ан?де
+ан?ж
+ан?за?о
+ан?ког???н?ко
+ан?коли
+ан??к?л?ки
+ан???о
+ан?кого
+ан?ком?
+ан?ким
+ан??ог???н?ко
+ан??о
+ан??ого
+ан??ом?
+ан??им
+ан??кий
+ан??кого
+ан??ком?
+ан??ким
+ан??к?м
+ан??ка
+ан??ко?
+ан??к?й
+ан??к?
+ан??ко?
+ан??ке
+ан??к?
+ан??ки?
+ан??кими
+ан??к??ен?кий
+ан??к??ен?кого
+ан??к??ен?ком?
+ан??к??ен?ким
+ан??к??ен?к?м
+ан??к??ен?ка
+ан??к??ен?ко?
+ан??к??ен?к?й
+ан??к??ен?к?
+ан??к??ен?ко?
+ан??к??ен?ке
+ан??к??ен?к?
+ан??к??ен?ки?
+ан??к??ен?кими
+ан??к???н?кий
+ан??к???н?кого
+ан??к???н?ком?
+ан??к???н?ким
+ан??к???н?к?м
+ан??к???н?ка
+ан??к???н?ко?
+ан??к???н?к?й
+ан??к???н?к?
+ан??к???н?ко?
+ан??к???н?ке
+ан??к???н?к?
+ан??к???н?ки?
+ан??к???н?кими
+ан?
+а?о
+а?ож
+а?
+а?ей
+а?кже
+б
+ба
+бага?о
+бага??о?
+бага??ом
+бага??ма
+без
+би
+б?л?
+бо
+бодай
+б??и
+б?д?
+б?д?мо
+б?д??е
+?
+??и
+????
+б?д?
+б?де?
+б?де
+б?дем
+б?демо
+б?де?е
+б?д???
+б?в
+б?ла
+б?ло
+б?ли
+б???м
+б???м?о
+в
+ва?
+ва?ого
+ва?ом?
+ва?им
+ва??м
+ва?а
+ва?о?
+ва??й
+ва??
+ва?о?
+ва?е
+ва??
+ва?и?
+ва?ими
+вве??
+в??ого
+в??ом?
+в??м
+в??
+в????
+в??й
+в??
+в????
+в?е
+в??
+в???
+в??ма
+вв?
+ве??
+вздовж
+ви
+ва?
+вам
+вами
+в?
+в?д
+в?дколи
+в?дпов?дно
+в?д?епе?
+в?д?од?
+в?н
+його
+н?ого
+йом?
+ним
+н?м
+н?ом?
+вла?не
+вла??иво
+вна?л?док
+вона
+??
+не?
+?й
+не?
+н?й
+вони
+??
+ни?
+?м
+ними
+воно
+вподовж
+впопе?ек
+вп?одовж
+в??л?кий
+в??л?кого
+в??л?ком?
+в??л?ким
+в??л?к?м
+в??л?ка
+в??л?ко?
+в??л?к?й
+в??л?к?
+в??л?ко?
+в??л?ке
+в??л?к?
+в??л?ки?
+в??л?кими
+в?л?д
+в??пе?е?
+в??ди
+в??кий
+в??кого
+в??ком?
+в??ким
+в??к?м
+в??ка
+в??ко?
+в??к?й
+в??к?
+в??ко?
+в??ке
+в??к?
+в??ки?
+в??кими
+в??к
+в??м
+га?азд
+ге
+ге??
+де
+дедал?
+де?нде
+дек?л?ка
+дек?л?ко?
+дек?л?ком
+дек?л?кома
+деколи
+деко??ий
+деко??ого
+деко??ом?
+деко??им
+деко???м
+деко??а
+деко??о?
+деко???й
+деко???
+деко??о?
+деко??е
+деко???
+деко??и?
+деко??ими
+де??
+де??о
+декого
+деком?
+деким
+дек?м
+де?ий
+де?ийого
+де?и?м?
+де?ийом?
+де?и?м
+де?и?
+де?и??
+де?и?й
+де?и?
+де?и??
+де?и?
+де?и?
+де?и??
+де?и?ми
+де?о
+де?ого
+де?ом?
+де?им
+де??м
+де?кий
+де?кого
+де?ком?
+де?ким
+де?к?м
+де?ка
+де?ко?
+де?к?й
+де?к?
+де?ко?
+де?ке
+де?к?
+де?ки?
+де?кими
+дл?
+до
+довкола
+доки
+доп???
+допоки
+до??
+до?епе?
+до?и
+еге
+ж
+же
+жодний
+жодного
+жодном?
+жодним
+жодн?м
+жодна
+жодно?
+жодн?й
+жодн?
+жодно?
+жодне
+жодн?
+жодни?
+жодними
+жоден
+жодн???н?кий
+жодн???н?кого
+жодн???н?ком?
+жодн???н?ким
+жодн???н?к?м
+жодн???н?ка
+жодн???н?ко?
+жодн???н?к?й
+жодн???н?к?
+жодн???н?ко?
+жодн???н?ке
+жодн???н?к?
+жодн???н?ки?
+жодн???н?кими
+з
+за
+завгодно
+завд?ки
+завжди
+зав?е
+задл?
+залежно
+зам????
+за?ади
+за?аз
+за?е
+зве???
+зв?дки
+зв?дкил???
+зв?дки??
+зв?дк?л?
+зв?дк?л?
+зв?дк?л???
+зв?д?и
+зв?д??л?
+зв?д??л?
+зв?д?и
+зв?д??л?
+зв?д??л?
+зв?д???л?
+зв?д???ди
+зв?д??л?
+здовж
+ззад?
+з?
+зо
+з?е?едини
+и?
+?
+?бн
+?з
+?з?е?едини
+?нак?е
+?нак?ий
+?нак?ого
+?нак?ом?
+?нак?им
+?нак??м
+?нак?а
+?нак?о?
+?нак??й
+?нак??
+?нак?о?
+?нак??
+?нак?и?
+?нак?ими
+?нколи
+?нод?
+?н?е
+?н?ого
+?н?ом?
+?н?им
+?н?ий
+?н??м
+?н?а
+?н?о?
+?н??й
+?н??
+?н?о?
+?н??
+?н?и?
+?н?ими
+??е
+??н?й
+??н?ого
+??н?ом?
+??н?м
+??н?
+??н?о?
+??н?
+??н?о?
+??н?
+??н?
+??н??
+??н?ми
+й
+к?л?ка
+к?л?ко?
+к?л?ком
+к?л?кома
+к?не??
+кожний
+кожного
+кожном?
+кожним
+кожн?м
+кожна
+кожно?
+кожн?й
+кожн?
+кожно?
+кожне
+кожн?
+кожни?
+кожними
+кожен
+кожн???н?кий
+кожн???н?кого
+кожн???н?ком?
+кожн???н?ким
+кожн???н?к?м
+кожн???н?ка
+кожн???н?ко?
+кожн???н?к?й
+кожн???н?к?
+кожн???н?ко?
+кожн???н?ке
+кожн???н?к?
+кожн???н?ки?
+кожн???н?кими
+коли
+коли??
+коло
+ко??ий
+ко??ого
+ко??ом?
+ко??им
+ко???м
+ко??а
+ко??о?
+ко???й
+ко???
+ко??о?
+ко??е
+ко???
+ко??и?
+ко??ими
+ко??ий??
+ко??ого??
+ко??ом???
+ко??имо??
+ко??им??
+ко???м??
+ко??а??
+ко??о???
+ко???й??
+ко?????
+ко??о???
+ко??е??
+ко?????
+ко??и?о??
+ко??и???
+ко??ими??
+к?ай
+к??з?
+к??м
+к??г
+к??гом
+к?ди
+к?ди??
+к?до?
+ледве
+лед?
+ли?
+ли?е
+ли?ен?
+ме???
+ми
+на?
+нам
+нами
+м?ж
+м?й
+мого
+мо?м?
+мо?м
+мо?
+мо??
+мо?й
+мо?
+мо??
+мо?
+мо?
+мо??
+мо?ми
+мов
+мовби
+мовби?о
+мог?и
+мож???
+мож?
+може?
+може
+можем
+можемо
+може?е
+мож???
+м?г
+могла
+могло
+могли
+можна
+на
+нав???
+нав??о
+нав??о??
+навколо
+навк??г
+навпаки
+навпе?ейми
+навп?о?и
+над
+над?
+надо
+напе?ед
+напе?едодн?
+напе?ек??
+напе?е??з
+нап?ик?н??
+нап?о?и
+на?е?ед
+на??п?о?и
+на?е
+на?е
+на?еб
+на?еб?о
+на?
+на?ого
+на?ом?
+на?им
+на??м
+на?а
+на?о?
+на??й
+на??
+на?о?
+на?е
+на??
+на?и?
+на?ими
+не
+неаби?о
+неаби?ого
+неаби?ом?
+неаби?им
+небага?о
+небага??о?
+небага??ом
+небага??ма
+невважа??и
+невже
+незважа??и
+немов
+немовби
+немовби?о
+нена?е
+нена?еб?о
+не?ай
+ниж?е
+н?
+н?би
+н?би?о
+н?де
+н?ж
+н?за?о
+н?зв?дки
+н?зв?дк?л?
+н?ким
+н?ког???н?ко
+н?кого
+н?коли
+н?ком?
+н?ко??ий
+н?ко??ого
+н?ко??ом?
+н?ко??им
+н?ко???м
+н?ко??а
+н?ко??о?
+н?ко???й
+н?ко???
+н?ко??о?
+н?ко??е
+н?ко???
+н?ко??и?
+н?ко??ими
+н?к?ди
+н?на?о
+н??к?л?ки
+н???о
+н??ий
+н??ийого
+н??и?м?
+н??ийом?
+н??и?м
+н??и?
+н??и??
+н??и?й
+н??и?
+н??и??
+н??и?
+н??и?
+н??и??
+н??и?ми
+н??ийний
+н??ийного
+н??ийном?
+н??ийним
+н??ийн?м
+н??ийна
+н??ийно?
+н??ийн?й
+н??ийн?
+н??ийно?
+н??ийне
+н??ийн?
+н??ийни?
+н??ийними
+н??им
+н??ого
+н??ом?
+н??о
+н??к
+н??кий
+н??кого
+н??ком?
+н??ким
+н??к?м
+н??ка
+н??ко?
+н??к?й
+н??к?
+н??ко?
+н??ке
+н??к?
+н??ки?
+н??кими
+н??к???н?кий
+н??к???н?кого
+н??к???н?ком?
+н??к???н?ким
+н??к???н?к?м
+н??к???н?ка
+н??к???н?ко?
+н??к???н?к?й
+н??к???н?к?
+н??к???н?ко?
+н??к???н?ке
+н??к???н?к?
+н??к???н?ки?
+н??к???н?кими
+но
+н?
+н?мо
+н?м?е
+о
+об
+обаб??
+об?к
+об??
+од
+один
+одного
+одном?
+одним
+одн?м
+одна
+одн???
+одно?
+одн?й
+одн?
+одн???
+одно?
+одне
+одно
+одн?
+одни?
+одними
+однак
+одна?е
+ок?ай
+ок??м
+ок??г
+ок??ги
+он
+онде
+онно
+оно
+оп??л?
+оп???
+о?е
+о????о
+о?к?л?ки
+о??
+о?
+о?ак
+о?акий
+о?акого
+о?аком?
+о?аким
+о?ак?м
+о?ака
+о?ако?
+о?ак?й
+о?ак?
+о?ако?
+о?аке
+о?ак?
+о?аки?
+о?акими
+о?ак???н?кий
+о?ак???н?кого
+о?ак???н?ком?
+о?ак???н?ким
+о?ак???н?к?м
+о?ак???н?ка
+о?ак???н?ко?
+о?ак???н?к?й
+о?ак???н?к?
+о?ак???н?ко?
+о?ак???н?ке
+о?ак???н?к?
+о?ак???н?ки?
+о?ак???н?кими
+о?ам
+о?же
+о?о
+о?ож
+о?ой
+о?ого
+о?ом?
+о?им
+о??м
+о?а
+о????
+о?о?
+о??й
+о??
+о????
+о?о?
+о?е
+о??
+о?и?
+о?ими
+о??е
+о??ак
+о??о
+о???
+о?е
+о?ей
+о??ого
+о??ом?
+о?им
+о??м
+о??
+о????
+о??й
+о??
+о????
+о??
+о?и?
+о?ими
+пак
+пе?ед
+пе?е?акий
+пе?е?акого
+пе?е?аком?
+пе?е?аким
+пе?е?ак?м
+пе?е?ака
+пе?е?ако?
+пе?е?ак?й
+пе?е?ак?
+пе?е?ако?
+пе?е?аке
+пе?е?ак?
+пе?е?аки?
+пе?е?акими
+п?д
+п?до
+п??л?
+по
+поб?к
+поб??
+поблиз?
+пове??
+повз
+повздовж
+пов??ди
+пов??дно
+подек?ди
+поде?кий
+поде?кого
+поде?ком?
+поде?ким
+поде?к?м
+поде?ка
+поде?ко?
+поде?к?й
+поде?к?
+поде?ко?
+поде?ке
+поде?к?
+поде?ки?
+поде?кими
+подовж
+поза
+позад
+позад?
+поза?ой
+поза?ого
+поза?ом?
+поза?им
+поза??м
+поза?а
+поза????
+поза?о?
+поза??й
+поза??
+поза????
+поза?о?
+поза?е
+поза??
+поза?и?
+поза?ими
+поза?к
+поздовж
+поки
+пок?л?
+пок?ай
+пом?ж
+понад
+понадо
+пониж?е
+попе?ед
+попе?ед?
+попе?ек
+поп?д
+попл??
+поп?и
+поп?о???
+по???
+по??д
+по?е?ед
+по?е?един?
+по??м
+по?з
+п?е??н?
+п?и
+п?и?ом?
+п?и??м
+п?и?ом?
+п?о
+п?ом?ж
+п?о??о
+п?о?е
+п?о?и
+п?о??гом
+?аз
+?ан??е
+?ам
+?амого
+?амом?
+?амим
+?ам?м
+?ама
+?амо?
+?ам?й
+?ам?
+?амо?
+?аме
+?амо
+?ами
+?ам?
+?ами?
+?амими
+?амий
+?в?й
+?вого
+?во?м?
+?во?м
+?во?
+?во??
+?во?й
+?во?
+?во??
+?во?
+?во?
+?во??
+?во?ми
+?е
+?ебе
+?об?
+?обо?
+?еб?о
+?е?ед
+?и???
+?к?л?ки
+?к?л?ко?
+?к?л?ком
+?к?л?кома
+?к?л?ки??
+?к?л?ко?о??
+?к?л?ко???
+?к?л?комо??
+?к?л?ком??
+?к?л?кома??
+?к??з?
+?пе?ед?
+?п?авд?
+???л?ки
+???л?ко?
+???л?ком
+???л?кома
+??п?о?и
+??п?о?ив
+??ди
+??кий
+??кого
+??ком?
+??ким
+??к?м
+??ка
+??ко?
+??к?й
+??к?
+??ко?
+??ке
+??к?
+??ки?
+??кими
+?а
+?ак
+?акенний
+?акенного
+?акенном?
+?акенним
+?акенн?м
+?акенна
+?акенно?
+?акенн?й
+?акенн?
+?акенно?
+?акенне
+?акенн?
+?акенни?
+?акенними
+?аки
+?акий
+?акого
+?аком?
+?аким
+?ак?м
+?ака
+?ако?
+?ак?й
+?ак?
+?ако?
+?аке
+?ак?
+?аки?
+?акими
+?ак???н?кий
+?ак???н?кого
+?ак???н?ком?
+?ак???н?ким
+?ак???н?к?м
+?ак???н?ка
+?ак???н?ко?
+?ак???н?к?й
+?ак???н?к?
+?ак???н?ко?
+?ак???н?ке
+?ак???н?к?
+?ак???н?ки?
+?ак???н?кими
+?акож
+?ам
+?амки
+?ам?ой
+?ам?ого
+?ам?ом?
+?ам?им
+?ам??м
+?ам?а
+?ам????
+?ам?о?
+?ам??й
+?ам??
+?ам????
+?ам?о?
+?ам?е
+?ам??
+?ам?и?
+?ам?ими
+?в?й
+?вого
+?во?м?
+?во?м
+?во?
+?во??
+?во?й
+?во?
+?во??
+?во?
+?во?
+?во??
+?во?ми
+?е
+?ого
+?ом?
+?им
+??м
+?е?
+?еж
+?епе?
+?епе?е?ки
+?и
+?ебе
+?об?
+?обо?
+??л?ки
+?о
+?об?о
+?од?
+?ож
+?ой
+????
+?о?
+??й
+??
+????
+?о?
+??
+?и?
+?ими
+?о?о
+??ди
+??до?
+???
+???ен?ки
+???е?ки
+???ки
+?
+?в
+?ве??
+???ого
+???ом?
+???м
+???
+?????
+???й
+???
+?????
+??е
+???
+????
+???ма
+?в?
+?г?
+?здовж
+?на?л?док
+?подовж
+?попе?ек
+?п?одовж
+???л?кий
+???л?кого
+???л?ком?
+???л?ким
+???л?к?м
+???л?ка
+???л?ко?
+???л?к?й
+???л?к?
+???л?ко?
+???л?ке
+???л?к?
+???л?ки?
+???л?кими
+??л?д
+???пе?е?
+???ди
+???кий
+???кого
+???ком?
+???ким
+???к?м
+???ка
+???ко?
+???к?й
+???к?
+???ко?
+???ке
+???к?
+???ки?
+???кими
+???к
+???м
+?ай
+??ба
+?о?
+?о?а
+??о
+кого
+ком?
+ким
+к?м
+??о??
+кого??
+ком???
+кимо??
+ким??
+к?мо??
+к?м??
+?е
+??ого
+??ом?
+?им
+??м
+?еб?о
+?ей
+??
+????
+??й
+??
+????
+??
+?и?
+?ими
+?ен?
+?е?ез
+?и
+?ий
+?ийого
+?и?м?
+?ийом?
+?и?м
+?и?
+?и??
+?и?й
+?и?
+?и??
+?и?
+?и?
+?и??
+?и?ми
+?ий??
+?ийого??
+?и?м???
+?ийом???
+?и?мо??
+?и?м??
+?и???
+?и????
+?и?й??
+?и???
+?и????
+?и???
+?и???
+?и??о??
+?и????
+?и?ми??
+?ом?
+?ом???
+?о??зна
+?л??ом
+?е
+?о
+?ого
+в??о
+?им
+??м
+?об
+?оби
+?одо
+?ойно
+?оп?авда
+?о??
+?ого??
+в??о??
+?имо??
+?им??
+??мо??
+??м??
+?
+мене
+мен?
+мно?
+?к
+?кби
+?кий
+?кого
+?ком?
+?ким
+?к?м
+?ка
+?ко?
+?к?й
+?к?
+?ко?
+?ке
+?к?
+?ки?
+?кими
+?кий??
+?кого??
+?ком???
+?кимо??
+?ким??
+?к?м??
+?ка??
+?ко???
+?к?й??
+?к???
+?ко???
+?ке??
+?к???
+?ки?о??
+?ки???
+?кими??
+?ко??
+?к?аз
+?к?о
\ No newline at end of file
diff --git a/lucene/analysis/morfologik/src/resources/org/apache/lucene/analysis/uk/ukrainian.dict b/lucene/analysis/morfologik/src/resources/org/apache/lucene/analysis/uk/ukrainian.dict
new file mode 100644
index 0000000..679e392
Binary files /dev/null and b/lucene/analysis/morfologik/src/resources/org/apache/lucene/analysis/uk/ukrainian.dict differ
diff --git a/lucene/analysis/morfologik/src/resources/org/apache/lucene/analysis/uk/ukrainian.info b/lucene/analysis/morfologik/src/resources/org/apache/lucene/analysis/uk/ukrainian.info
new file mode 100644
index 0000000..2c69f4b
--- /dev/null
+++ b/lucene/analysis/morfologik/src/resources/org/apache/lucene/analysis/uk/ukrainian.info
@@ -0,0 +1,10 @@
+#
+# Dictionary properties.
+#
+
+fsa.dict.separator=+
+fsa.dict.encoding=cp1251
+
+fsa.dict.encoder=SUFFIX
+
+fsa.dict.speller.ignore-diacritics=false
diff --git a/lucene/analysis/morfologik/src/test/org/apache/lucene/analysis/uk/TestUkrainianAnalyzer.java b/lucene/analysis/morfologik/src/test/org/apache/lucene/analysis/uk/TestUkrainianAnalyzer.java
new file mode 100644
index 0000000..87d3be5
--- /dev/null
+++ b/lucene/analysis/morfologik/src/test/org/apache/lucene/analysis/uk/TestUkrainianAnalyzer.java
@@ -0,0 +1,65 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.lucene.analysis.uk;
+
+
+import java.io.IOException;
+
+import org.apache.lucene.analysis.Analyzer;
+import org.apache.lucene.analysis.BaseTokenStreamTestCase;
+
+/**
+ * Test case for UkrainianAnalyzer.
+ */
+
+public class TestUkrainianAnalyzer extends BaseTokenStreamTestCase {
+
+  /** Check that UkrainianAnalyzer doesn't discard any numbers */
+  public void testDigitsInUkrainianCharset() throws IOException {
+    UkrainianMorfologikAnalyzer ra = new UkrainianMorfologikAnalyzer();
+    assertAnalyzesTo(ra, "text 1000", new String[] { "text", "1000" });
+    ra.close();
+  }
+
+  public void testReusableTokenStream() throws Exception {
+    Analyzer a = new UkrainianMorfologikAnalyzer();
+    assertAnalyzesTo(a, "Ц? п'??а ? ?во? ?е?г? ???а????? по кол?.",
+                     new String[] { "п'??а", "?е?га", "???а?и??", "кола", "коло", "коло", "к?л", "к?л" });
+    a.close();
+  }
+
+  public void testSpecialCharsTokenStream() throws Exception {
+    Analyzer a = new UkrainianMorfologikAnalyzer();
+    assertAnalyzesTo(a, "Ц? пʼ??а, ? ?во?? ?е?г?, ???а????? по кол?.",
+                     new String[] { "п'??а", "?е?га", "???а?и??", "кола", "коло", "коло", "к?л", "к?л" });
+    a.close();
+  }
+
+  public void testCapsTokenStream() throws Exception {
+    Analyzer a = new UkrainianMorfologikAnalyzer();
+    assertAnalyzesTo(a, "Цей Чайков??кий.",
+                     new String[] { "?айков??кий" });
+    a.close();
+  }
+
+  /** blast some random strings through the analyzer */
+  public void testRandomStrings() throws Exception {
+    Analyzer analyzer = new UkrainianMorfologikAnalyzer();
+    checkRandomData(random(), analyzer, 1000*RANDOM_MULTIPLIER);
+    analyzer.close();
+  }
+}

