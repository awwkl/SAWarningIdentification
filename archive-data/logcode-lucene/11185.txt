GitDiffStart: d0d741d127f6695f4d33eb147a9f7db66b3c5891 | Sun Sep 9 08:21:36 2012 +0000
diff --git a/dev-tools/idea/.idea/ant.xml b/dev-tools/idea/.idea/ant.xml
index 5372745..52df350 100644
--- a/dev-tools/idea/.idea/ant.xml
+++ b/dev-tools/idea/.idea/ant.xml
@@ -21,6 +21,7 @@
     <buildFile url="file://$PROJECT_DIR$/lucene/analysis/stempel/build.xml" />
     <buildFile url="file://$PROJECT_DIR$/lucene/analysis/uima/build.xml" />
     <buildFile url="file://$PROJECT_DIR$/lucene/benchmark/build.xml" />
+    <buildFile url="file://$PROJECT_DIR$/lucene/codecs/build.xml" />
     <buildFile url="file://$PROJECT_DIR$/lucene/facet/build.xml" />
     <buildFile url="file://$PROJECT_DIR$/lucene/grouping/build.xml" />
     <buildFile url="file://$PROJECT_DIR$/lucene/join/build.xml" />
diff --git a/dev-tools/idea/.idea/libraries/Lucene_tools_library.xml b/dev-tools/idea/.idea/libraries/Lucene_tools_library.xml
deleted file mode 100644
index 8fb973e..0000000
--- a/dev-tools/idea/.idea/libraries/Lucene_tools_library.xml
+++ /dev/null
@@ -1,10 +0,0 @@
-<component name="libraryTable">
-  <library name="Lucene tools library">
-    <CLASSES>
-      <root url="file://$PROJECT_DIR$/lucene/tools/lib" />
-    </CLASSES>
-    <JAVADOC />
-    <SOURCES />
-    <jarDirectory url="file://$PROJECT_DIR$/lucene/tools/lib" recursive="false" />
-  </library>
-</component>
\ No newline at end of file
diff --git a/dev-tools/idea/.idea/libraries/Solr_core_library.xml b/dev-tools/idea/.idea/libraries/Solr_core_library.xml
new file mode 100644
index 0000000..bf6c10a
--- /dev/null
+++ b/dev-tools/idea/.idea/libraries/Solr_core_library.xml
@@ -0,0 +1,10 @@
+<component name="libraryTable">
+  <library name="Solr core library">
+    <CLASSES>
+      <root url="file://$PROJECT_DIR$/solr/core/lib" />
+    </CLASSES>
+    <JAVADOC />
+    <SOURCES />
+    <jarDirectory url="file://$PROJECT_DIR$/solr/core/lib" recursive="false" />
+  </library>
+</component>
\ No newline at end of file
diff --git a/dev-tools/idea/.idea/libraries/Solr_library.xml b/dev-tools/idea/.idea/libraries/Solr_library.xml
deleted file mode 100644
index de17c4d..0000000
--- a/dev-tools/idea/.idea/libraries/Solr_library.xml
+++ /dev/null
@@ -1,10 +0,0 @@
-<component name="libraryTable">
-  <library name="Solr library">
-    <CLASSES>
-      <root url="file://$PROJECT_DIR$/solr/lib" />
-    </CLASSES>
-    <JAVADOC />
-    <SOURCES />
-    <jarDirectory url="file://$PROJECT_DIR$/solr/lib" recursive="false" />
-  </library>
-</component>
\ No newline at end of file
diff --git a/dev-tools/idea/.idea/libraries/Solrj_library.xml b/dev-tools/idea/.idea/libraries/Solrj_library.xml
new file mode 100644
index 0000000..c067eae
--- /dev/null
+++ b/dev-tools/idea/.idea/libraries/Solrj_library.xml
@@ -0,0 +1,10 @@
+<component name="libraryTable">
+  <library name="Solrj library">
+    <CLASSES>
+      <root url="file://$PROJECT_DIR$/solr/solrj/lib" />
+    </CLASSES>
+    <JAVADOC />
+    <SOURCES />
+    <jarDirectory url="file://$PROJECT_DIR$/solr/solrj/lib" recursive="true" />
+  </library>
+</component>
\ No newline at end of file
diff --git a/dev-tools/idea/.idea/modules.xml b/dev-tools/idea/.idea/modules.xml
index 14e7a0b..c828188 100644
--- a/dev-tools/idea/.idea/modules.xml
+++ b/dev-tools/idea/.idea/modules.xml
@@ -3,13 +3,11 @@
   <component name="ProjectModuleManager">
     <modules>
       <module filepath="$PROJECT_DIR$/parent.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/lucene.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/codecs/codecs.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/demo/demo.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/highlighter/highlighter.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/memory/memory.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/misc/misc.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/sandbox/sandbox.iml" />
+
+      <module filepath="$PROJECT_DIR$/lucene/core/src/java/lucene-core.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/core/src/resources/lucene-core-resources.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/core/src/test/lucene-core-tests.iml" />
+
       <module filepath="$PROJECT_DIR$/lucene/analysis/common/analysis-common.iml" />
       <module filepath="$PROJECT_DIR$/lucene/analysis/icu/icu.iml" />
       <module filepath="$PROJECT_DIR$/lucene/analysis/kuromoji/kuromoji.iml" />
@@ -19,22 +17,40 @@
       <module filepath="$PROJECT_DIR$/lucene/analysis/stempel/stempel.iml" />
       <module filepath="$PROJECT_DIR$/lucene/analysis/uima/analysis-uima.iml" />
       <module filepath="$PROJECT_DIR$/lucene/benchmark/benchmark.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/codecs/src/java/codecs.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/codecs/src/test/codecs-tests.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/codecs/src/resources/codecs-resources.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/demo/demo.iml" />
       <module filepath="$PROJECT_DIR$/lucene/facet/facet.iml" />
       <module filepath="$PROJECT_DIR$/lucene/grouping/grouping.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/highlighter/highlighter.iml" />
       <module filepath="$PROJECT_DIR$/lucene/join/join.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/memory/memory.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/misc/misc.iml" />
       <module filepath="$PROJECT_DIR$/lucene/queries/queries.iml" />
       <module filepath="$PROJECT_DIR$/lucene/queryparser/queryparser.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/sandbox/sandbox.iml" />
       <module filepath="$PROJECT_DIR$/lucene/spatial/spatial.iml" />
       <module filepath="$PROJECT_DIR$/lucene/suggest/suggest.iml" />
-      <module filepath="$PROJECT_DIR$/solr/solr.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/test-framework/lucene-test-framework.iml" />
+      <module filepath="$PROJECT_DIR$/lucene/tools/tools.iml" />
+
+      <module filepath="$PROJECT_DIR$/solr/core/src/java/solr-core.iml" />
+      <module filepath="$PROJECT_DIR$/solr/core/src/test/solr-core-tests.iml" />
+      <module filepath="$PROJECT_DIR$/solr/core/src/test-files/solr-core-test-files.iml" />
+
       <module filepath="$PROJECT_DIR$/solr/contrib/analysis-extras/analysis-extras.iml" />
       <module filepath="$PROJECT_DIR$/solr/contrib/clustering/clustering.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/dataimporthandler/dataimporthandler.iml" />
       <module filepath="$PROJECT_DIR$/solr/contrib/dataimporthandler-extras/dataimporthandler-extras.iml" />
+      <module filepath="$PROJECT_DIR$/solr/contrib/dataimporthandler/dataimporthandler.iml" />
       <module filepath="$PROJECT_DIR$/solr/contrib/extraction/extraction.iml" />
       <module filepath="$PROJECT_DIR$/solr/contrib/langid/langid.iml" />
       <module filepath="$PROJECT_DIR$/solr/contrib/uima/uima.iml" />
       <module filepath="$PROJECT_DIR$/solr/contrib/velocity/velocity.iml" />
+      <module filepath="$PROJECT_DIR$/solr/solrj/src/java/solrj.iml" />
+      <module filepath="$PROJECT_DIR$/solr/solrj/src/test/solrj-tests.iml" />
+      <module filepath="$PROJECT_DIR$/solr/solrj/src/test-files/solrj-test-files.iml" />
+      <module filepath="$PROJECT_DIR$/solr/test-framework/solr-test-framework.iml" />
     </modules>
   </component>
 </project>
diff --git a/dev-tools/idea/.idea/workspace.xml b/dev-tools/idea/.idea/workspace.xml
index d2be079..de82de2 100644
--- a/dev-tools/idea/.idea/workspace.xml
+++ b/dev-tools/idea/.idea/workspace.xml
@@ -1,14 +1,14 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
-  <component name="RunManager" selected="JUnit.lucene">
+  <component name="RunManager" selected="JUnit.Lucene core">
     <configuration default="true" type="JUnit" factoryName="JUnit">
       <option name="VM_PARAMETERS" value="-ea" />
     </configuration>
-    <configuration default="false" name="Lucene" type="JUnit" factoryName="JUnit">
-      <module name="lucene" />
+    <configuration default="false" name="Lucene core" type="JUnit" factoryName="JUnit">
+      <module name="lucene-core-tests" />
       <option name="TEST_OBJECT" value="package" />
-      <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/lucene/build/lucene-idea" />
-      <option name="VM_PARAMETERS" value="-ea -Dlucene.version=4.0-SNAPSHOT -DtempDir=temp" />
+      <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/lucene/build/core" />
+      <option name="VM_PARAMETERS" value="-ea -Dlucene.version=5.0-SNAPSHOT -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
     </configuration>
     <configuration default="false" name="Module analyzers-common" type="JUnit" factoryName="JUnit">
@@ -79,7 +79,7 @@
       </method>
     </configuration>
     <configuration default="false" name="Module codecs" type="JUnit" factoryName="JUnit">
-      <module name="facet" />
+      <module name="codecs-tests" />
       <option name="TEST_OBJECT" value="package" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/lucene/build/codecs" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
@@ -162,25 +162,32 @@
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
     </configuration>
-    <configuration default="false" name="Solr" type="JUnit" factoryName="JUnit">
-      <module name="solr" />
+    <configuration default="false" name="Solr core" type="JUnit" factoryName="JUnit">
+      <module name="solr-core-tests" />
+      <option name="TEST_OBJECT" value="package" />
+      <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/solr/build/solr-core" />
+      <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=5.0 -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
+      <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+    </configuration>
+    <configuration default="false" name="Solrj" type="JUnit" factoryName="JUnit">
+      <module name="solrj-tests" />
       <option name="TEST_OBJECT" value="package" />
-      <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/solr/build/solr-idea" />
-      <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=4.0 -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
+      <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/solr/build/solr-solrj" />
+      <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=5.0 -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
     </configuration>
     <configuration default="false" name="Solr analysis-extras contrib" type="JUnit" factoryName="JUnit">
       <module name="analysis-extras" />
       <option name="TEST_OBJECT" value="package" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/solr/build/contrib/solr-analysis-extras" />
-      <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=4.0 -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
+      <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=5.0 -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
     </configuration>
     <configuration default="false" name="Solr clustering contrib" type="JUnit" factoryName="JUnit">
       <module name="clustering" />
       <option name="TEST_OBJECT" value="package" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/solr/build/contrib/solr-clustering" />
-      <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=4.0 -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
+      <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=5.0 -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
     </configuration>
     <configuration default="false" name="Solr dataimporthandler contrib" type="JUnit" factoryName="JUnit">
@@ -215,7 +222,7 @@
       <module name="uima" />
       <option name="TEST_OBJECT" value="package" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/solr/build/contrib/solr-uima" />
-      <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=4.0 -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
+      <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=5.0 -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
     </configuration>
     <configuration default="false" name="Solr velocity contrib" type="JUnit" factoryName="JUnit">
@@ -225,8 +232,8 @@
       <option name="VM_PARAMETERS" value="-ea" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
     </configuration>
-    <list size="30">
-      <item index="0" class="java.lang.String" itemvalue="JUnit.Lucene" />
+    <list size="32">
+      <item index="0" class="java.lang.String" itemvalue="JUnit.Lucene core" />
       <item index="1" class="java.lang.String" itemvalue="JUnit.Module analyzers-common" />
       <item index="2" class="java.lang.String" itemvalue="JUnit.Module analyzers-icu" />
       <item index="3" class="java.lang.String" itemvalue="JUnit.Module analyzers-kuromoji" />
@@ -236,26 +243,28 @@
       <item index="7" class="java.lang.String" itemvalue="JUnit.Module analyzers-stempel" />
       <item index="8" class="java.lang.String" itemvalue="JUnit.Module analyzers-uima" />
       <item index="9" class="java.lang.String" itemvalue="JUnit.Module benchmark" />
-      <item index="10" class="java.lang.String" itemvalue="JUnit.Module facet" />
-      <item index="11" class="java.lang.String" itemvalue="JUnit.Module grouping" />
-      <item index="12" class="java.lang.String" itemvalue="JUnit.Module highlighter" />
-      <item index="13" class="java.lang.String" itemvalue="JUnit.Module join" />
-      <item index="14" class="java.lang.String" itemvalue="JUnit.Module memory" />
-      <item index="15" class="java.lang.String" itemvalue="JUnit.Module misc" />
-      <item index="16" class="java.lang.String" itemvalue="JUnit.Module queries" />
-      <item index="17" class="java.lang.String" itemvalue="JUnit.Module queryparser" />
-      <item index="18" class="java.lang.String" itemvalue="JUnit.Module sandbox" />
-      <item index="19" class="java.lang.String" itemvalue="JUnit.Module spatial" />
-      <item index="20" class="java.lang.String" itemvalue="JUnit.Module suggest" />
-      <item index="21" class="java.lang.String" itemvalue="JUnit.Solr" />
-      <item index="22" class="java.lang.String" itemvalue="JUnit.Solr analysis-extras contrib" />
-      <item index="23" class="java.lang.String" itemvalue="JUnit.Solr clustering contrib" />
-      <item index="24" class="java.lang.String" itemvalue="JUnit.Solr dataimporthandler contrib" />
-      <item index="25" class="java.lang.String" itemvalue="JUnit.Solr dataimporthandler-extras contrib" />
-      <item index="26" class="java.lang.String" itemvalue="JUnit.Solr extraction contrib" />
-      <item index="27" class="java.lang.String" itemvalue="JUnit.Solr langid contrib" />
-      <item index="28" class="java.lang.String" itemvalue="JUnit.Solr uima contrib" />
-      <item index="29" class="java.lang.String" itemvalue="JUnit.Solr velocity contrib" />
+      <item index="10" class="java.lang.String" itemvalue="JUnit.Module codecs" />
+      <item index="11" class="java.lang.String" itemvalue="JUnit.Module facet" />
+      <item index="12" class="java.lang.String" itemvalue="JUnit.Module grouping" />
+      <item index="13" class="java.lang.String" itemvalue="JUnit.Module highlighter" />
+      <item index="14" class="java.lang.String" itemvalue="JUnit.Module join" />
+      <item index="15" class="java.lang.String" itemvalue="JUnit.Module memory" />
+      <item index="16" class="java.lang.String" itemvalue="JUnit.Module misc" />
+      <item index="17" class="java.lang.String" itemvalue="JUnit.Module queries" />
+      <item index="18" class="java.lang.String" itemvalue="JUnit.Module queryparser" />
+      <item index="19" class="java.lang.String" itemvalue="JUnit.Module sandbox" />
+      <item index="20" class="java.lang.String" itemvalue="JUnit.Module spatial" />
+      <item index="21" class="java.lang.String" itemvalue="JUnit.Module suggest" />
+      <item index="22" class="java.lang.String" itemvalue="JUnit.Solr core" />
+      <item index="23" class="java.lang.String" itemvalue="JUnit.Solr analysis-extras contrib" />
+      <item index="24" class="java.lang.String" itemvalue="JUnit.Solr clustering contrib" />
+      <item index="25" class="java.lang.String" itemvalue="JUnit.Solr dataimporthandler contrib" />
+      <item index="26" class="java.lang.String" itemvalue="JUnit.Solr dataimporthandler-extras contrib" />
+      <item index="27" class="java.lang.String" itemvalue="JUnit.Solr extraction contrib" />
+      <item index="28" class="java.lang.String" itemvalue="JUnit.Solr langid contrib" />
+      <item index="29" class="java.lang.String" itemvalue="JUnit.Solr uima contrib" />
+      <item index="30" class="java.lang.String" itemvalue="JUnit.Solr velocity contrib" />
+      <item index="31" class="java.lang.String" itemvalue="JUnit.Solrj" />
     </list>
   </component>
 </project>
diff --git a/dev-tools/idea/lucene/analysis/common/analysis-common.iml b/dev-tools/idea/lucene/analysis/common/analysis-common.iml
index 54cb300..7c40818 100644
--- a/dev-tools/idea/lucene/analysis/common/analysis-common.iml
+++ b/dev-tools/idea/lucene/analysis/common/analysis-common.iml
@@ -13,6 +13,7 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/analysis/icu/icu.iml b/dev-tools/idea/lucene/analysis/icu/icu.iml
index 7b6c54d..3f218da 100644
--- a/dev-tools/idea/lucene/analysis/icu/icu.iml
+++ b/dev-tools/idea/lucene/analysis/icu/icu.iml
@@ -23,7 +23,8 @@
       </library>
     </orderEntry>
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/analysis/kuromoji/kuromoji.iml b/dev-tools/idea/lucene/analysis/kuromoji/kuromoji.iml
index bdff65d..3485630 100644
--- a/dev-tools/idea/lucene/analysis/kuromoji/kuromoji.iml
+++ b/dev-tools/idea/lucene/analysis/kuromoji/kuromoji.iml
@@ -15,7 +15,8 @@
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" name="ICU library" level="project" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/analysis/morfologik/morfologik.iml b/dev-tools/idea/lucene/analysis/morfologik/morfologik.iml
index da65508..626233b 100644
--- a/dev-tools/idea/lucene/analysis/morfologik/morfologik.iml
+++ b/dev-tools/idea/lucene/analysis/morfologik/morfologik.iml
@@ -22,7 +22,8 @@
       </library>
     </orderEntry>
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/analysis/phonetic/phonetic.iml b/dev-tools/idea/lucene/analysis/phonetic/phonetic.iml
index 67c1670..c72563d 100644
--- a/dev-tools/idea/lucene/analysis/phonetic/phonetic.iml
+++ b/dev-tools/idea/lucene/analysis/phonetic/phonetic.iml
@@ -22,7 +22,8 @@
       </library>
     </orderEntry>
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/analysis/smartcn/smartcn.iml b/dev-tools/idea/lucene/analysis/smartcn/smartcn.iml
index d9e440a..ed9d374 100644
--- a/dev-tools/idea/lucene/analysis/smartcn/smartcn.iml
+++ b/dev-tools/idea/lucene/analysis/smartcn/smartcn.iml
@@ -12,7 +12,8 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/analysis/stempel/stempel.iml b/dev-tools/idea/lucene/analysis/stempel/stempel.iml
index 3c9f6a8..15f9340 100644
--- a/dev-tools/idea/lucene/analysis/stempel/stempel.iml
+++ b/dev-tools/idea/lucene/analysis/stempel/stempel.iml
@@ -12,7 +12,8 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/analysis/uima/analysis-uima.iml b/dev-tools/idea/lucene/analysis/uima/analysis-uima.iml
index d62da6d..68127db 100644
--- a/dev-tools/idea/lucene/analysis/uima/analysis-uima.iml
+++ b/dev-tools/idea/lucene/analysis/uima/analysis-uima.iml
@@ -23,7 +23,8 @@
       </library>
     </orderEntry>
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/benchmark/benchmark.iml b/dev-tools/idea/lucene/benchmark/benchmark.iml
index 58f14bb..6463486 100644
--- a/dev-tools/idea/lucene/benchmark/benchmark.iml
+++ b/dev-tools/idea/lucene/benchmark/benchmark.iml
@@ -24,13 +24,14 @@
     </orderEntry>
     <orderEntry type="library" name="ICU library" level="project" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="facet" />
     <orderEntry type="module" module-name="highlighter" />
     <orderEntry type="module" module-name="icu" />
     <orderEntry type="module" module-name="misc" />
     <orderEntry type="module" module-name="memory" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
     <orderEntry type="module" module-name="queryparser" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/codecs/codecs.iml b/dev-tools/idea/lucene/codecs/codecs.iml
deleted file mode 100644
index 1ace440..0000000
--- a/dev-tools/idea/lucene/codecs/codecs.iml
+++ /dev/null
@@ -1,16 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<module type="JAVA_MODULE" version="4">
-  <component name="NewModuleRootManager" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/../build/codecs/classes/java" />
-    <output-test url="file://$MODULE_DIR$/../build/codecs/classes/test" />
-    <exclude-output />
-    <content url="file://$MODULE_DIR$">
-      <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-    </content>
-    <orderEntry type="inheritedJdk" />
-    <orderEntry type="sourceFolder" forTests="false" />
-    <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="module" module-name="lucene" />
-  </component>
-</module>
diff --git a/dev-tools/idea/lucene/codecs/src/java/codecs.iml b/dev-tools/idea/lucene/codecs/src/java/codecs.iml
new file mode 100644
index 0000000..f012fd3
--- /dev/null
+++ b/dev-tools/idea/lucene/codecs/src/java/codecs.iml
@@ -0,0 +1,15 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/codecs/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/codecs/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="false" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="module" module-name="codecs-resources" />
+    <orderEntry type="module" module-name="lucene-core" />
+  </component>
+</module>
diff --git a/dev-tools/idea/lucene/codecs/src/resources/codecs-resources.iml b/dev-tools/idea/lucene/codecs/src/resources/codecs-resources.iml
new file mode 100644
index 0000000..9feec2d
--- /dev/null
+++ b/dev-tools/idea/lucene/codecs/src/resources/codecs-resources.iml
@@ -0,0 +1,13 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/codecs/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/codecs/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="false" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+  </component>
+</module>
diff --git a/dev-tools/idea/lucene/codecs/src/test/codecs-tests.iml b/dev-tools/idea/lucene/codecs/src/test/codecs-tests.iml
new file mode 100755
index 0000000..e21e946
--- /dev/null
+++ b/dev-tools/idea/lucene/codecs/src/test/codecs-tests.iml
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/codecs/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/codecs/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="true" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="codecs" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-core" />
+  </component>
+</module>
+
diff --git a/dev-tools/idea/lucene/core/src/java/lucene-core.iml b/dev-tools/idea/lucene/core/src/java/lucene-core.iml
new file mode 100644
index 0000000..c74dfec
--- /dev/null
+++ b/dev-tools/idea/lucene/core/src/java/lucene-core.iml
@@ -0,0 +1,15 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/core/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/core/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="false" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="module" module-name="lucene-core-resources" />
+  </component>
+</module>
+
diff --git a/dev-tools/idea/lucene/core/src/resources/lucene-core-resources.iml b/dev-tools/idea/lucene/core/src/resources/lucene-core-resources.iml
new file mode 100644
index 0000000..3c48aa1
--- /dev/null
+++ b/dev-tools/idea/lucene/core/src/resources/lucene-core-resources.iml
@@ -0,0 +1,13 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/core/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/core/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="false" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+  </component>
+</module>
diff --git a/dev-tools/idea/lucene/core/src/test/lucene-core-tests.iml b/dev-tools/idea/lucene/core/src/test/lucene-core-tests.iml
new file mode 100644
index 0000000..f285f34
--- /dev/null
+++ b/dev-tools/idea/lucene/core/src/test/lucene-core-tests.iml
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/core/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/core/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="true" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="codecs" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-core" />
+  </component>
+</module>
+
diff --git a/dev-tools/idea/lucene/demo/demo.iml b/dev-tools/idea/lucene/demo/demo.iml
index d76a617..a18db63 100644
--- a/dev-tools/idea/lucene/demo/demo.iml
+++ b/dev-tools/idea/lucene/demo/demo.iml
@@ -12,6 +12,7 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module-library">
       <library>
         <CLASSES>
@@ -22,7 +23,7 @@
       </library>
     </orderEntry>
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
     <orderEntry type="module" module-name="queryparser" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/facet/facet.iml b/dev-tools/idea/lucene/facet/facet.iml
index 835ba65..60f54ad 100644
--- a/dev-tools/idea/lucene/facet/facet.iml
+++ b/dev-tools/idea/lucene/facet/facet.iml
@@ -13,7 +13,8 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/grouping/grouping.iml b/dev-tools/idea/lucene/grouping/grouping.iml
index 891867d..2eda904 100644
--- a/dev-tools/idea/lucene/grouping/grouping.iml
+++ b/dev-tools/idea/lucene/grouping/grouping.iml
@@ -11,7 +11,8 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" module-name="lucene-core" />
     <orderEntry type="module" module-name="queries" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/highlighter/highlighter.iml b/dev-tools/idea/lucene/highlighter/highlighter.iml
index a544e3b..0e231e3 100644
--- a/dev-tools/idea/lucene/highlighter/highlighter.iml
+++ b/dev-tools/idea/lucene/highlighter/highlighter.iml
@@ -11,8 +11,9 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="memory" />
     <orderEntry type="module" module-name="misc" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/join/join.iml b/dev-tools/idea/lucene/join/join.iml
index ee35fc9..e5acd68 100644
--- a/dev-tools/idea/lucene/join/join.iml
+++ b/dev-tools/idea/lucene/join/join.iml
@@ -12,7 +12,8 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="grouping" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/lucene.iml b/dev-tools/idea/lucene/lucene.iml
deleted file mode 100644
index 508f7d9..0000000
--- a/dev-tools/idea/lucene/lucene.iml
+++ /dev/null
@@ -1,24 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<module type="JAVA_MODULE" version="4">
-  <component name="NewModuleRootManager" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/build/lucene-idea/classes/java" />
-    <output-test url="file://$MODULE_DIR$/build/lucene-idea/classes/test" />
-    <exclude-output />
-    <content url="file://$MODULE_DIR$">
-      <sourceFolder url="file://$MODULE_DIR$/test-framework/src/resources" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/test-framework/src/java" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/core/src/resources" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/core/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/tools/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/core/src/test" isTestSource="true" />
-      <excludeFolder url="file://$MODULE_DIR$/build" />
-      <excludeFolder url="file://$MODULE_DIR$/dist" />
-    </content>
-    <orderEntry type="inheritedJdk" />
-    <orderEntry type="sourceFolder" forTests="false" />
-    <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="library" name="Lucene tools library" level="project" />
-    <orderEntry type="library" name="Ant" level="project"/>
-  </component>
-</module>
-
diff --git a/dev-tools/idea/lucene/memory/memory.iml b/dev-tools/idea/lucene/memory/memory.iml
index 9bdc660..388e870 100644
--- a/dev-tools/idea/lucene/memory/memory.iml
+++ b/dev-tools/idea/lucene/memory/memory.iml
@@ -11,8 +11,9 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="misc" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
     <orderEntry type="module" module-name="queryparser" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/misc/misc.iml b/dev-tools/idea/lucene/misc/misc.iml
index 9332448..37f841e 100644
--- a/dev-tools/idea/lucene/misc/misc.iml
+++ b/dev-tools/idea/lucene/misc/misc.iml
@@ -11,6 +11,7 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/queries/queries.iml b/dev-tools/idea/lucene/queries/queries.iml
index 2b4b876..16fe485 100644
--- a/dev-tools/idea/lucene/queries/queries.iml
+++ b/dev-tools/idea/lucene/queries/queries.iml
@@ -12,6 +12,7 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/queryparser/queryparser.iml b/dev-tools/idea/lucene/queryparser/queryparser.iml
index 6799506..4dc2905 100644
--- a/dev-tools/idea/lucene/queryparser/queryparser.iml
+++ b/dev-tools/idea/lucene/queryparser/queryparser.iml
@@ -13,7 +13,8 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" module-name="lucene-core" />
     <orderEntry type="module" module-name="queries" />
     <orderEntry type="module" module-name="sandbox" />
   </component>
diff --git a/dev-tools/idea/lucene/sandbox/sandbox.iml b/dev-tools/idea/lucene/sandbox/sandbox.iml
index 2f7ed14..ffa103e 100644
--- a/dev-tools/idea/lucene/sandbox/sandbox.iml
+++ b/dev-tools/idea/lucene/sandbox/sandbox.iml
@@ -20,7 +20,8 @@
       </library>
     </orderEntry>
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
 
diff --git a/dev-tools/idea/lucene/spatial/spatial.iml b/dev-tools/idea/lucene/spatial/spatial.iml
index 9d203f8..32232be 100644
--- a/dev-tools/idea/lucene/spatial/spatial.iml
+++ b/dev-tools/idea/lucene/spatial/spatial.iml
@@ -22,7 +22,8 @@
       </library>
     </orderEntry>
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" module-name="lucene-core" />
     <orderEntry type="module" module-name="queries" />
     <orderEntry type="module" module-name="analysis-common" scope="TEST"/>
   </component>
diff --git a/dev-tools/idea/lucene/suggest/suggest.iml b/dev-tools/idea/lucene/suggest/suggest.iml
index 9f3338d..015a79b 100644
--- a/dev-tools/idea/lucene/suggest/suggest.iml
+++ b/dev-tools/idea/lucene/suggest/suggest.iml
@@ -11,6 +11,7 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/lucene/test-framework/lucene-test-framework.iml b/dev-tools/idea/lucene/test-framework/lucene-test-framework.iml
new file mode 100644
index 0000000..7bd7025
--- /dev/null
+++ b/dev-tools/idea/lucene/test-framework/lucene-test-framework.iml
@@ -0,0 +1,17 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../build/test-framework/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../build/test-framework/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="library" name="JUnit" level="project" />
+    <orderEntry type="module" module-name="codecs" />
+    <orderEntry type="module" module-name="lucene-core" />
+  </component>
+</module>
diff --git a/dev-tools/idea/lucene/tools/tools.iml b/dev-tools/idea/lucene/tools/tools.iml
new file mode 100644
index 0000000..a3bcd07
--- /dev/null
+++ b/dev-tools/idea/lucene/tools/tools.iml
@@ -0,0 +1,24 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../build/tools/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../build/tools/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="library" name="Ant" level="project" />
+    <orderEntry type="module-library">
+      <library>
+        <CLASSES>
+          <root url="file://$MODULE_DIR$/lib" />
+        </CLASSES>
+        <JAVADOC />
+        <SOURCES />
+        <jarDirectory url="file://$MODULE_DIR$/lib" recursive="true" />
+      </library>
+    </orderEntry>
+  </component>
+</module>
diff --git a/dev-tools/idea/parent.iml b/dev-tools/idea/parent.iml
index e253bc9..436c530 100644
--- a/dev-tools/idea/parent.iml
+++ b/dev-tools/idea/parent.iml
@@ -4,6 +4,11 @@
     <content url="file://$MODULE_DIR$">
       <excludeFolder url="file://$MODULE_DIR$/.idea" />
       <excludeFolder url="file://$MODULE_DIR$/dist" />
+      <excludeFolder url="file://$MODULE_DIR$/lucene/build" />
+      <excludeFolder url="file://$MODULE_DIR$/lucene/dist" />
+      <excludeFolder url="file://$MODULE_DIR$/solr/build" />
+      <excludeFolder url="file://$MODULE_DIR$/solr/dist" />
+      <excludeFolder url="file://$MODULE_DIR$/solr/package" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
diff --git a/dev-tools/idea/solr/contrib/analysis-extras/analysis-extras.iml b/dev-tools/idea/solr/contrib/analysis-extras/analysis-extras.iml
index 78d2732..c303a7f 100644
--- a/dev-tools/idea/solr/contrib/analysis-extras/analysis-extras.iml
+++ b/dev-tools/idea/solr/contrib/analysis-extras/analysis-extras.iml
@@ -21,15 +21,19 @@
         <jarDirectory url="file://$MODULE_DIR$/lib" recursive="false" />
       </library>
     </orderEntry>
-    <orderEntry type="library" name="Solr library" level="project" />
+    <orderEntry type="library" name="Solr core library" level="project" />
+    <orderEntry type="library" name="Solrj library" level="project" />
     <orderEntry type="library" name="Morfologik library" level="project" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" module-name="morfologik" />
     <orderEntry type="module" module-name="icu" />
     <orderEntry type="module" module-name="smartcn" />
-    <orderEntry type="module" module-name="solr" />
+    <orderEntry type="module" module-name="solr-core" />
+    <orderEntry type="module" module-name="solrj" />
     <orderEntry type="module" module-name="stempel" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/solr/contrib/clustering/clustering.iml b/dev-tools/idea/solr/contrib/clustering/clustering.iml
index 6076255..bd85d56 100644
--- a/dev-tools/idea/solr/contrib/clustering/clustering.iml
+++ b/dev-tools/idea/solr/contrib/clustering/clustering.iml
@@ -21,17 +21,21 @@
         <jarDirectory url="file://$MODULE_DIR$/lib" recursive="false" />
       </library>
     </orderEntry>
-    <orderEntry type="library" name="Solr library" level="project" />
+    <orderEntry type="library" name="Solr core library" level="project" />
+    <orderEntry type="library" name="Solrj library" level="project" />
     <orderEntry type="library" name="Solr DIH library" level="project" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
     <orderEntry type="module" module-name="highlighter" />
     <orderEntry type="module" module-name="memory" />
     <orderEntry type="module" module-name="misc" />
     <orderEntry type="module" module-name="phonetic" />
-    <orderEntry type="module" module-name="solr" />
+    <orderEntry type="module" module-name="solr-core" />
+    <orderEntry type="module" module-name="solrj" />
     <orderEntry type="module" module-name="spatial" />
     <orderEntry type="module" module-name="suggest" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
     <orderEntry type="module" module-name="analysis-common" />
   </component>
 </module>
diff --git a/dev-tools/idea/solr/contrib/dataimporthandler-extras/dataimporthandler-extras.iml b/dev-tools/idea/solr/contrib/dataimporthandler-extras/dataimporthandler-extras.iml
index 55ba4ff..382030c 100644
--- a/dev-tools/idea/solr/contrib/dataimporthandler-extras/dataimporthandler-extras.iml
+++ b/dev-tools/idea/solr/contrib/dataimporthandler-extras/dataimporthandler-extras.iml
@@ -12,12 +12,15 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="library" name="Solr library" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
+    <orderEntry type="library" name="Solr core library" level="project" />
+    <orderEntry type="library" name="Solrj library" level="project" />
     <orderEntry type="library" name="Solr DIH library" level="project" />
     <orderEntry type="library" name="Solr extraction library" level="project" />
-    <orderEntry type="module" module-name="solr" />
+    <orderEntry type="module" module-name="solr-core" />
+    <orderEntry type="module" module-name="solrj" />
     <orderEntry type="module" module-name="dataimporthandler" />
-    <orderEntry type="module" module-name="lucene" scope="TEST" />
   </component>
 </module>
 
diff --git a/dev-tools/idea/solr/contrib/dataimporthandler/dataimporthandler.iml b/dev-tools/idea/solr/contrib/dataimporthandler/dataimporthandler.iml
index eb3428a..90e4cf1 100644
--- a/dev-tools/idea/solr/contrib/dataimporthandler/dataimporthandler.iml
+++ b/dev-tools/idea/solr/contrib/dataimporthandler/dataimporthandler.iml
@@ -14,10 +14,14 @@
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
     <orderEntry type="library" scope="TEST" name="HSQLDB" level="project" />
-    <orderEntry type="library" name="Solr library" level="project" />
+    <orderEntry type="library" name="Solr core library" level="project" />
+    <orderEntry type="library" name="Solrj library" level="project" />
     <orderEntry type="library" name="Solr DIH library" level="project" />
-    <orderEntry type="module" module-name="solr" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
+    <orderEntry type="module" module-name="solr-core" />
+    <orderEntry type="module" module-name="solrj" />
     <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/solr/contrib/extraction/extraction.iml b/dev-tools/idea/solr/contrib/extraction/extraction.iml
index 877d72f..4d47157 100644
--- a/dev-tools/idea/solr/contrib/extraction/extraction.iml
+++ b/dev-tools/idea/solr/contrib/extraction/extraction.iml
@@ -12,9 +12,13 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="library" name="Solr library" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
+    <orderEntry type="library" name="Solr core library" level="project" />
+    <orderEntry type="library" name="Solrj library" level="project" />
     <orderEntry type="library" name="Solr extraction library" level="project" />
-    <orderEntry type="module" module-name="solr" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" module-name="solr-core" />
+    <orderEntry type="module" module-name="solrj" />
+    <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
diff --git a/dev-tools/idea/solr/contrib/langid/langid.iml b/dev-tools/idea/solr/contrib/langid/langid.iml
index 3f79403..48e75eb 100644
--- a/dev-tools/idea/solr/contrib/langid/langid.iml
+++ b/dev-tools/idea/solr/contrib/langid/langid.iml
@@ -13,7 +13,8 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="library" name="Solr library" level="project" />
+    <orderEntry type="library" name="Solr core library" level="project" />
+    <orderEntry type="library" name="Solrj library" level="project" />
     <orderEntry type="library" name="Solr extraction library" level="project" />
     <orderEntry type="module-library">
       <library>
@@ -25,7 +26,9 @@
         <jarDirectory url="file://$MODULE_DIR$/lib" recursive="false" />
       </library>
     </orderEntry>
-    <orderEntry type="module" module-name="solr" />
-    <orderEntry type="module" module-name="lucene" scope="TEST" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
+    <orderEntry type="module" module-name="solr-core" />
+    <orderEntry type="module" module-name="solrj" />
   </component>
 </module>
diff --git a/dev-tools/idea/solr/contrib/uima/uima.iml b/dev-tools/idea/solr/contrib/uima/uima.iml
index c962746..a01e211 100644
--- a/dev-tools/idea/solr/contrib/uima/uima.iml
+++ b/dev-tools/idea/solr/contrib/uima/uima.iml
@@ -13,7 +13,8 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="library" name="Solr library" level="project" />
+    <orderEntry type="library" name="Solr core library" level="project" />
+    <orderEntry type="library" name="Solrj library" level="project" />
     <orderEntry type="module-library">
       <library>
         <CLASSES>
@@ -24,8 +25,11 @@
         <jarDirectory url="file://$MODULE_DIR$/lib" recursive="false" />
       </library>
     </orderEntry>
-    <orderEntry type="module" module-name="solr" />
-    <orderEntry type="module" module-name="lucene" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
+    <orderEntry type="module" module-name="solr-core" />
+    <orderEntry type="module" module-name="solrj" />
+    <orderEntry type="module" module-name="lucene-core" />
     <orderEntry type="module" module-name="analysis-uima" />
     <orderEntry type="module" module-name="analysis-common" />
   </component>
diff --git a/dev-tools/idea/solr/contrib/velocity/velocity.iml b/dev-tools/idea/solr/contrib/velocity/velocity.iml
index 1c1972d..57cc2a7 100644
--- a/dev-tools/idea/solr/contrib/velocity/velocity.iml
+++ b/dev-tools/idea/solr/contrib/velocity/velocity.iml
@@ -12,10 +12,13 @@
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
     <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="library" name="Solr library" level="project" />
+    <orderEntry type="library" name="Solr core library" level="project" />
+    <orderEntry type="library" name="Solrj library" level="project" />
     <orderEntry type="library" name="Solr velocity library" level="project" />
-    <orderEntry type="module" module-name="solr" />
-    <orderEntry type="module" module-name="lucene" scope="TEST" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
+    <orderEntry type="module" module-name="solr-core" />
+    <orderEntry type="module" module-name="solrj" />
   </component>
 </module>
 
diff --git a/dev-tools/idea/solr/core/src/java/solr-core.iml b/dev-tools/idea/solr/core/src/java/solr-core.iml
new file mode 100644
index 0000000..91a2972
--- /dev/null
+++ b/dev-tools/idea/solr/core/src/java/solr-core.iml
@@ -0,0 +1,29 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/solr-core/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/solr-core/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="false" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="library" name="Solr core library" level="project" />
+    <orderEntry type="library" name="Solrj library" level="project" />
+    <orderEntry type="library" name="Solr example library" level="project" />
+    <orderEntry type="module" module-name="solrj" />
+    <orderEntry type="module" module-name="kuromoji" />
+    <orderEntry type="module" module-name="spatial" />
+    <orderEntry type="module" module-name="grouping" />
+    <orderEntry type="module" module-name="highlighter" />
+    <orderEntry type="module" module-name="icu" />
+    <orderEntry type="module" module-name="queries" />
+    <orderEntry type="module" module-name="misc" />
+    <orderEntry type="module" module-name="phonetic" />
+    <orderEntry type="module" module-name="suggest" />
+    <orderEntry type="module" module-name="analysis-common" />
+    <orderEntry type="module" module-name="lucene-core" />
+    <orderEntry type="module" module-name="queryparser" />
+  </component>
+</module>
diff --git a/dev-tools/idea/solr/core/src/test-files/solr-core-test-files.iml b/dev-tools/idea/solr/core/src/test-files/solr-core-test-files.iml
new file mode 100644
index 0000000..97b87d5
--- /dev/null
+++ b/dev-tools/idea/solr/core/src/test-files/solr-core-test-files.iml
@@ -0,0 +1,13 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/solr-core/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/solr-core/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="true" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+  </component>
+</module>
diff --git a/dev-tools/idea/solr/core/src/test/solr-core-tests.iml b/dev-tools/idea/solr/core/src/test/solr-core-tests.iml
new file mode 100644
index 0000000..792e5af
--- /dev/null
+++ b/dev-tools/idea/solr/core/src/test/solr-core-tests.iml
@@ -0,0 +1,29 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/solr-core/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/solr-core/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="true" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="library" scope="TEST" name="Solr core library" level="project" />
+    <orderEntry type="library" scope="TEST" name="Solrj library" level="project" />
+    <orderEntry type="library" scope="TEST" name="Solr example library" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solr-core-test-files" />
+    <orderEntry type="module" scope="TEST" module-name="solr-core" />
+    <orderEntry type="module" scope="TEST" module-name="solrj" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-core" />
+    <orderEntry type="module" scope="TEST" module-name="analysis-common" />
+    <orderEntry type="module" scope="TEST" module-name="queryparser" />
+    <orderEntry type="module" scope="TEST" module-name="queries" />
+    <orderEntry type="module" scope="TEST" module-name="suggest" />
+    <orderEntry type="module" scope="TEST" module-name="spatial" />
+    <orderEntry type="module" scope="TEST" module-name="misc" />
+  </component>
+</module>
diff --git a/dev-tools/idea/solr/solr.iml b/dev-tools/idea/solr/solr.iml
deleted file mode 100644
index 72e4abe..0000000
--- a/dev-tools/idea/solr/solr.iml
+++ /dev/null
@@ -1,37 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<module type="JAVA_MODULE" version="4">
-  <component name="NewModuleRootManager" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/build/solr-idea/classes/java" />
-    <output-test url="file://$MODULE_DIR$/build/solr-idea/classes/test" />
-    <exclude-output />
-    <content url="file://$MODULE_DIR$">
-      <sourceFolder url="file://$MODULE_DIR$/solrj/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/core/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/core/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/core/src/test-files" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/solrj/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/solrj/src/test-files" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/test-framework/src/java" isTestSource="true" />
-      <excludeFolder url="file://$MODULE_DIR$/build" />
-      <excludeFolder url="file://$MODULE_DIR$/dist" />
-      <excludeFolder url="file://$MODULE_DIR$/package" />
-    </content>
-    <orderEntry type="inheritedJdk" />
-    <orderEntry type="sourceFolder" forTests="false" />
-    <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
-    <orderEntry type="library" name="Solr library" level="project" />
-    <orderEntry type="library" name="Solr example library" level="project" />
-    <orderEntry type="module" module-name="kuromoji" />
-    <orderEntry type="module" module-name="spatial" />
-    <orderEntry type="module" module-name="grouping" />
-    <orderEntry type="module" module-name="highlighter" />
-    <orderEntry type="module" module-name="icu" />
-    <orderEntry type="module" module-name="queries" />
-    <orderEntry type="module" module-name="misc" />
-    <orderEntry type="module" module-name="phonetic" />
-    <orderEntry type="module" module-name="suggest" />
-    <orderEntry type="module" module-name="analysis-common" />
-    <orderEntry type="module" module-name="lucene" />
-    <orderEntry type="module" module-name="queryparser" />
-  </component>
-</module>
diff --git a/dev-tools/idea/solr/solrj/src/java/solrj.iml b/dev-tools/idea/solr/solrj/src/java/solrj.iml
new file mode 100644
index 0000000..ff770db
--- /dev/null
+++ b/dev-tools/idea/solr/solrj/src/java/solrj.iml
@@ -0,0 +1,14 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/solr-solrj/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/solr-solrj/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="false" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="library" name="Solrj library" level="project" />
+  </component>
+</module>
diff --git a/dev-tools/idea/solr/solrj/src/test-files/solrj-test-files.iml b/dev-tools/idea/solr/solrj/src/test-files/solrj-test-files.iml
new file mode 100644
index 0000000..7098acd
--- /dev/null
+++ b/dev-tools/idea/solr/solrj/src/test-files/solrj-test-files.iml
@@ -0,0 +1,13 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/solr-solrj/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/solr-solrj/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="true" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+  </component>
+</module>
diff --git a/dev-tools/idea/solr/solrj/src/test/solrj-tests.iml b/dev-tools/idea/solr/solrj/src/test/solrj-tests.iml
new file mode 100644
index 0000000..83fc4cc
--- /dev/null
+++ b/dev-tools/idea/solr/solrj/src/test/solrj-tests.iml
@@ -0,0 +1,21 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../../build/solr-solrj/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../../build/solr-solrj/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$" isTestSource="true" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="library" scope="TEST" name="Solr core library" level="project" />
+    <orderEntry type="library" scope="TEST" name="Solrj library" level="project" />
+    <orderEntry type="library" scope="TEST" name="Solr example library" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
+    <orderEntry type="module" scope="TEST" module-name="solrj" />
+    <orderEntry type="module" scope="TEST" module-name="solr-core" />
+  </component>
+</module>
diff --git a/dev-tools/idea/solr/test-framework/solr-test-framework.iml b/dev-tools/idea/solr/test-framework/solr-test-framework.iml
new file mode 100644
index 0000000..ae208c9
--- /dev/null
+++ b/dev-tools/idea/solr/test-framework/solr-test-framework.iml
@@ -0,0 +1,23 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../build/solr-test-framework/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../build/solr-test-framework/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="library" name="JUnit" level="project" />
+    <orderEntry type="library" name="Solr core library" level="project" />
+    <orderEntry type="library" name="Solr example library" level="project" />
+    <orderEntry type="library" name="Solrj library" level="project" />
+    <orderEntry type="module" module-name="lucene-test-framework" />
+    <orderEntry type="module" module-name="analysis-common" />
+    <orderEntry type="module" module-name="solrj" />
+    <orderEntry type="module" module-name="solr-core" />
+    <orderEntry type="module" module-name="lucene-core" />
+  </component>
+</module>

