GitDiffStart: 37153b5c34e7938da2214b434542028e3ca52f1b | Sat Aug 4 20:50:11 2012 +0000
diff --git a/solr/CHANGES.txt b/solr/CHANGES.txt
index 10187dd..b262fbb 100644
--- a/solr/CHANGES.txt
+++ b/solr/CHANGES.txt
@@ -204,7 +204,7 @@ Other Changes
 
 * SOLR-3215: Clone SolrInputDocument when distrib indexing so that update processors after
   the distrib update process do not process the document twice. (Mark Miller)
-  
+
 * SOLR-3683: Improved error handling if an <analyzer> contains both an 
   explicit class attribute, as well as nested factories. (hossman)
 
@@ -217,6 +217,10 @@ Other Changes
   using a file (this previously worked in debug mode only).  When configuration errors are 
   encountered, the error message is returned in XML format.  (James Dyer)
   
+* SOLR-3439: Make SolrCell easier to use out of the box. Also improves "/browse" to display
+  rich-text documents correctly, along with facets for author and content_type.  
+  With the new "content" field, highlighting of body is supported. See also SOLR-3672 for
+  easier posting of a whole directory structure. (Jack Krupansky, janhoy)
 
 ==================  4.0.0-ALPHA ==================
 More information about this release, including any errata related to the 
diff --git a/solr/contrib/velocity/src/java/org/apache/solr/response/VelocityResponseWriter.java b/solr/contrib/velocity/src/java/org/apache/solr/response/VelocityResponseWriter.java
index 91f8fb8..9d4e827 100644
--- a/solr/contrib/velocity/src/java/org/apache/solr/response/VelocityResponseWriter.java
+++ b/solr/contrib/velocity/src/java/org/apache/solr/response/VelocityResponseWriter.java
@@ -30,6 +30,8 @@ import org.apache.velocity.runtime.RuntimeConstants;
 import org.apache.velocity.tools.generic.*;
 
 import java.io.*;
+import java.util.HashMap;
+import java.util.Map;
 import java.util.Properties;
 
 public class VelocityResponseWriter implements QueryResponseWriter {
@@ -81,6 +83,64 @@ public class VelocityResponseWriter implements QueryResponseWriter {
 
     context.put("engine", engine);  // for $engine.resourceExists(...)
 
+    // Mimetype to extension map for detecting file type and show icon
+    // List of types match the icons in /solr/img/filetypes
+    Map<String, String> mimeToExt = new HashMap<String, String>() {{
+      put("application/x-7z-compressed", "7z");
+      put("application/postscript", "ai");
+      put("application/pgp-signature", "asc");
+      put("application/octet-stream", "bin");
+      put("application/x-bzip2", "bz2");
+      put("text/x-c", "c");
+      put("application/vnd.ms-htmlhelp", "chm");
+      put("application/java-vm", "class");
+      put("text/css", "css");
+      put("text/csv", "csv");
+      put("application/x-debian-package", "deb");
+      put("application/msword", "doc");
+      put("message/rfc822", "eml");
+      put("image/gif", "gif");
+      put("application/winhlp", "hlp");
+      put("text/html", "html");
+      put("application/java-archive", "jar");
+      put("text/x-java-source", "java");
+      put("image/jpeg", "jpeg");
+      put("application/javascript", "js");
+      put("application/vnd.oasis.opendocument.chart", "odc");
+      put("application/vnd.oasis.opendocument.formula", "odf");
+      put("application/vnd.oasis.opendocument.graphics", "odg");
+      put("application/vnd.oasis.opendocument.image", "odi");
+      put("application/vnd.oasis.opendocument.presentation", "odp");
+      put("application/vnd.oasis.opendocument.spreadsheet", "ods");
+      put("application/vnd.oasis.opendocument.text", "odt");
+      put("application/pdf", "pdf");
+      put("application/pgp-encrypted", "pgp");
+      put("image/png", "png");
+      put("application/vnd.ms-powerpoint", "ppt");
+      put("audio/x-pn-realaudio", "ram");
+      put("application/x-rar-compressed", "rar");
+      put("application/vnd.rn-realmedia", "rm");
+      put("application/rtf", "rtf");
+      put("application/x-shockwave-flash", "swf");
+      put("application/vnd.sun.xml.calc", "sxc");
+      put("application/vnd.sun.xml.draw", "sxd");
+      put("application/vnd.sun.xml.impress", "sxi");
+      put("application/vnd.sun.xml.writer", "sxw");
+      put("application/x-tar", "tar");
+      put("application/x-tex", "tex");
+      put("text/plain", "txt");
+      put("text/x-vcard", "vcf");
+      put("application/vnd.visio", "vsd");
+      put("audio/x-wav", "wav");
+      put("audio/x-ms-wma", "wma");
+      put("video/x-ms-wmv", "wmv");
+      put("application/vnd.ms-excel", "xls");
+      put("application/xml", "xml");
+      put("application/x-xpinstall", "xpi");
+      put("application/zip", "zip");
+    }};
+    context.put("mimeToExt", mimeToExt);
+    
     String layout_template = request.getParams().get("v.layout");
     String json_wrapper = request.getParams().get("v.json");
     boolean wrap_response = (layout_template != null) || (json_wrapper != null);
diff --git a/solr/example/solr/collection1/conf/schema.xml b/solr/example/solr/collection1/conf/schema.xml
index f6504e4..af2006a 100755
--- a/solr/example/solr/collection1/conf/schema.xml
+++ b/solr/example/solr/collection1/conf/schema.xml
@@ -109,7 +109,10 @@
    <!-- Common metadata fields, named specifically to match up with
      SolrCell metadata when parsing rich documents such as Word, PDF.
      Some fields are multiValued only because Tika currently may return
-     multiple values for them.
+     multiple values for them. Some metadata is parsed from the documents,
+     but there are some which come from the client context:
+       "content_type": From the HTTP headers of incoming stream
+       "resourcename": From SolrCell request param resource.name
    -->
    <field name="title" type="text_general" indexed="true" stored="true" multiValued="true"/>
    <field name="subject" type="text_general" indexed="true" stored="true"/>
@@ -118,10 +121,18 @@
    <field name="author" type="text_general" indexed="true" stored="true"/>
    <field name="keywords" type="text_general" indexed="true" stored="true"/>
    <field name="category" type="text_general" indexed="true" stored="true"/>
+   <field name="resourcename" type="text_general" indexed="true" stored="true"/>
+   <field name="url" type="text_general" indexed="true" stored="true"/>
    <field name="content_type" type="string" indexed="true" stored="true" multiValued="true"/>
    <field name="last_modified" type="date" indexed="true" stored="true"/>
    <field name="links" type="string" indexed="true" stored="true" multiValued="true"/>
 
+   <!-- Main body of document extracted by SolrCell.
+        NOTE: This field is not indexed by default, since it is also copied to "text"
+        using copyField below. This is to save space. Use this field for returning and
+        highlighting document content. Use the "text" field to search the content. -->
+   <field name="content" type="text_general" indexed="false" stored="true" multiValued="true"/>
+   
 
    <!-- catchall field, containing all other searchable text fields (implemented
         via copyField further on in this schema  -->
@@ -232,6 +243,19 @@
 
    <!-- Copy the price into a currency enabled field (default USD) -->
    <copyField source="price" dest="price_c"/>
+
+   <!-- Text fields from SolrCell to search by default in our catch-all field -->
+   <copyField source="title" dest="text"/>
+   <copyField source="author" dest="text"/>
+   <copyField source="description" dest="text"/>
+   <copyField source="keywords" dest="text"/>
+   <copyField source="content" dest="text"/>
+   <copyField source="content_type" dest="text"/>
+   <copyField source="resourcename" dest="text"/>
+   <copyField source="url" dest="text"/>
+
+   <!-- Create a string version of author for faceting -->
+   <copyField source="author" dest="author_s"/>
 	
    <!-- Above, multiple source fields are copied to the [text] field. 
 	  Another way to map multiple source fields to the same 
diff --git a/solr/example/solr/collection1/conf/solrconfig.xml b/solr/example/solr/collection1/conf/solrconfig.xml
index b8013d5..a2cc8ea 100755
--- a/solr/example/solr/collection1/conf/solrconfig.xml
+++ b/solr/example/solr/collection1/conf/solrconfig.xml
@@ -850,6 +850,7 @@
        <str name="defType">edismax</str>
        <str name="qf">
           text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
+          title^10.0 description^5.0 keywords^5.0 author^2.0 resourcename^1.0
        </str>
        <str name="df">text</str>
        <str name="mm">100%</str>
@@ -859,14 +860,17 @@
 
        <str name="mlt.qf">
          text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
+         title^10.0 description^5.0 keywords^5.0 author^2.0 resourcename^1.0
        </str>
-       <str name="mlt.fl">text,features,name,sku,id,manu,cat</str>
+       <str name="mlt.fl">text,features,name,sku,id,manu,cat,title,description,keywords,author,resourcename</str>
        <int name="mlt.count">3</int>
 
        <!-- Faceting defaults -->
        <str name="facet">on</str>
        <str name="facet.field">cat</str>
        <str name="facet.field">manu_exact</str>
+       <str name="facet.field">content_type</str>
+       <str name="facet.field">author_s</str>
        <str name="facet.query">ipod</str>
        <str name="facet.query">GB</str>
        <str name="facet.mincount">1</str>
@@ -889,9 +893,18 @@
 
        <!-- Highlighting defaults -->
        <str name="hl">on</str>
-       <str name="hl.fl">text features name</str>
+       <str name="hl.fl">content features title name</str>
+       <str name="hl.encoder">html</str>
+       <str name="hl.simple.pre">&lt;b&gt;</str>
+       <str name="hl.simple.post">&lt;/b&gt;</str>
+       <str name="f.title.hl.fragsize">0</str>
+       <str name="f.title.hl.alternateField">title</str>
        <str name="f.name.hl.fragsize">0</str>
        <str name="f.name.hl.alternateField">name</str>
+       <str name="f.content.hl.snippets">3</str>
+       <str name="f.content.hl.fragsize">200</str>
+       <str name="f.content.hl.alternateField">content</str>
+       <str name="f.content.hl.maxAlternateFieldLength">750</str>
 
        <!-- Spell checking defaults -->
        <str name="spellcheck">on</str>
@@ -952,9 +965,6 @@
                   startup="lazy"
                   class="solr.extraction.ExtractingRequestHandler" >
     <lst name="defaults">
-      <!-- All the main content goes into "text"... if you need to return
-           the extracted text or do highlighting, use a stored field. -->
-      <str name="fmap.content">text</str>
       <str name="lowernames">true</str>
       <str name="uprefix">ignored_</str>
 
diff --git a/solr/example/solr/collection1/conf/velocity/VM_global_library.vm b/solr/example/solr/collection1/conf/velocity/VM_global_library.vm
index 4f4d0a5..b501545 100644
--- a/solr/example/solr/collection1/conf/velocity/VM_global_library.vm
+++ b/solr/example/solr/collection1/conf/velocity/VM_global_library.vm
@@ -133,10 +133,14 @@
 
 #macro(field $f)
   #if($response.response.highlighting.get($docId).get($f).get(0))
-    $!response.response.highlighting.get($docId).get($f).get(0)
+    #set($pad = "")
+    #foreach($v in $response.response.highlighting.get($docId).get($f))
+$pad$v##
+      #set($pad = " ... ")
+    #end
   #else
     #foreach($v in $doc.getFieldValues($f))
-      $v
+$v##
     #end
   #end
 #end  
diff --git a/solr/example/solr/collection1/conf/velocity/debug.vm b/solr/example/solr/collection1/conf/velocity/debug.vm
new file mode 100644
index 0000000..0b360ce
--- /dev/null
+++ b/solr/example/solr/collection1/conf/velocity/debug.vm
@@ -0,0 +1,17 @@
+#if($params.getBool("debugQuery",false))
+  <a href="#" onclick='jQuery(this).siblings("pre").toggle(); return false;'>toggle explain</a>
+  <pre style="display:none">$response.getExplainMap().get($doc.getFirstValue('id'))</pre>
+  <a href="#" onclick='jQuery(this).siblings("pre2").toggle(); return false;'>toggle all fields</a>
+  <pre2 style="display:none">
+  #foreach($fieldname in $doc.fieldNames)
+     <br>
+       <span class="field-name">$fieldname :</span>
+       <span>
+       #foreach($value in $doc.getFieldValues($fieldname))
+         $esc.html($value)
+       #end
+       </span>
+  #end
+   </br>
+  </pre2>
+#end
\ No newline at end of file
diff --git a/solr/example/solr/collection1/conf/velocity/doc.vm b/solr/example/solr/collection1/conf/velocity/doc.vm
deleted file mode 100644
index 7da97cb..0000000
--- a/solr/example/solr/collection1/conf/velocity/doc.vm
+++ /dev/null
@@ -1,42 +0,0 @@
-<div class="result-title"><b>#field('name')</b><span class="mlt">#if($params.getBool('mlt', false) == false)<a href="#lensNoQ&q=id:$docId&mlt=true">More Like This</a>#end</span></div>
-##do we have a physical store for this product
-#set($store = $doc.getFieldValue('store'))
-#if($store)<div class="map"><img src="http://maps.google.com/maps/api/staticmap?&zoom=12&size=150x80&maptype=roadmap&markers=$doc.getFieldValue('store')&sensor=false" /><div><small><a target="_map" href="http://maps.google.com/?q=$store&amp;source=embed">Larger Map</a></small></div></div>#end
-<div>Price: #field('price_c')</div>
-<div>Features: #field('features')</div>
-<div>In Stock: #field('inStock')</div>
-<div class="mlt">
-  #set($mlt = $mltResults.get($docId))
-  #set($mltOn = $params.getBool('mlt'))
-  #if($mltOn == true)<div class="field-name">Similar Items</div>#end
-  #if ($mltOn && $mlt && $mlt.size() > 0)
-  <ul>
-    #foreach($mltHit in $mlt)
-      #set($mltId = $mltHit.getFieldValue('id'))
-      <li><div><a href="#url_for_home?q=id:$mltId">$mltId</a></div><div><span class="field-name">Name:</span> $mltHit.getFieldValue('name')</div>
-        <div><span class="field-name">Price:</span> $!number.currency($mltHit.getFieldValue('price')) <span class="field-name">In Stock:</span> $mltHit.getFieldValue('inStock')</div>
-
-      </li>
-    #end
-  </ul>
-  #elseif($mltOn && $mlt.size() == 0)
-    <div>No Similar Items Found</div>
-  #end
-</div>
-#if($params.getBool("debugQuery",false))
-  <a href="#" onclick='jQuery(this).siblings("pre").toggle(); return false;'>toggle explain</a>
-  <pre style="display:none">$response.getExplainMap().get($doc.getFirstValue('id'))</pre>
-  <a href="#" onclick='jQuery(this).siblings("pre2").toggle(); return false;'>toggle all fields</a>
-  <pre2 style="display:none">
-  #foreach($fieldname in $doc.fieldNames)
-     <br>
-       <span class="field-name">$fieldname :</span>
-       <span>
-       #foreach($value in $doc.getFieldValues($fieldname))
-         $value
-       #end
-       </span>
-  #end
-   </br>
-  </pre2>
-#end
\ No newline at end of file
diff --git a/solr/example/solr/collection1/conf/velocity/facet_fields.vm b/solr/example/solr/collection1/conf/velocity/facet_fields.vm
index 91c50be..cd3bd37 100644
--- a/solr/example/solr/collection1/conf/velocity/facet_fields.vm
+++ b/solr/example/solr/collection1/conf/velocity/facet_fields.vm
@@ -1,6 +1,8 @@
 #if($response.facetFields)
     <h2 #annTitle("Facets generated by adding &facet.field= to the request")>Field Facets</h2>
     #foreach($field in $response.facetFields)
+      ## Hide facets without value
+      #if($field.values.size() > 0)
       <span class="facet-field">$field.name</span>
 
       <ul>
@@ -8,5 +10,6 @@
             <li><a href="#url_for_facet_filter($field.name, $facet.name)">$facet.name</a> ($facet.count)</li>
         #end
       </ul>
+      #end
     #end
   #end
\ No newline at end of file
diff --git a/solr/example/solr/collection1/conf/velocity/facet_ranges.vm b/solr/example/solr/collection1/conf/velocity/facet_ranges.vm
index 0118fe0..662aacc 100644
--- a/solr/example/solr/collection1/conf/velocity/facet_ranges.vm
+++ b/solr/example/solr/collection1/conf/velocity/facet_ranges.vm
@@ -1,5 +1,7 @@
 <h2 #annTitle("Facets generated by adding &facet.range= to the request")>Range Facets</h2>
 #foreach ($field in $response.response.facet_counts.facet_ranges)
+  ## Hide facets without value
+  #if($field.value.counts.size() > 0)
 	#set($name = $field.key)
 	#set($display = $name)
 	#set($f = $field.value.counts)
@@ -9,4 +11,5 @@
 	#set($before = $field.value.before)
 	#set($after = $field.value.after)
 	#display_facet_range($f, $display, $name, $start, $end, $gap, $before, $after)
+  #end
 #end
\ No newline at end of file
diff --git a/solr/example/solr/collection1/conf/velocity/hit.vm b/solr/example/solr/collection1/conf/velocity/hit.vm
index 5cd4fe8..54298be 100644
--- a/solr/example/solr/collection1/conf/velocity/hit.vm
+++ b/solr/example/solr/collection1/conf/velocity/hit.vm
@@ -1,5 +1,11 @@
 #set($docId = $doc.getFieldValue('id'))
 
 <div class="result-document">
-  #parse("doc.vm")
+#if($doc.getFieldValue('name'))
+  #parse("product-doc.vm")
+#elseif($doc.getFieldValue('compName_s'))
+  #parse("join-doc.vm")
+#else
+  #parse("richtext-doc.vm")
+#end
 </div>
diff --git a/solr/example/solr/collection1/conf/velocity/join-doc.vm b/solr/example/solr/collection1/conf/velocity/join-doc.vm
new file mode 100644
index 0000000..f7970e4
--- /dev/null
+++ b/solr/example/solr/collection1/conf/velocity/join-doc.vm
@@ -0,0 +1,4 @@
+<div class="result-title"><b>#field('compName_s')</b></div>
+<div>Id: #field('id') (company-details document for <a href="http://wiki.apache.org/solr/Join" target="_new">join</a>)</div>
+<div>Address: #field('address_s')</div>
+#parse('debug.vm')
\ No newline at end of file
diff --git a/solr/example/solr/collection1/conf/velocity/main.css b/solr/example/solr/collection1/conf/velocity/main.css
index c5acbb1..efc5680 100644
--- a/solr/example/solr/collection1/conf/velocity/main.css
+++ b/solr/example/solr/collection1/conf/velocity/main.css
@@ -167,6 +167,10 @@ a {
   width:60%;
 }
 
+.result-body{
+  background: #ddd;
+}
+
 .mlt{
   
 }
diff --git a/solr/example/solr/collection1/conf/velocity/product-doc.vm b/solr/example/solr/collection1/conf/velocity/product-doc.vm
new file mode 100644
index 0000000..4dbdcfe
--- /dev/null
+++ b/solr/example/solr/collection1/conf/velocity/product-doc.vm
@@ -0,0 +1,27 @@
+<div class="result-title"><b>#field('name')</b><span class="mlt">   #if($params.getBool('mlt', false) == false)<a href="#lensNoQ&q=id:$docId&mlt=true">More Like This</a>#end</span></div>
+##do we have a physical store for this product
+#set($store = $doc.getFieldValue('store'))
+#if($store)<div class="map"><img src="http://maps.google.com/maps/api/staticmap?&zoom=12&size=150x80&maptype=roadmap&markers=$doc.getFieldValue('store')&sensor=false" /><div><small><a target="_map" href="http://maps.google.com/?q=$store&amp;source=embed">Larger Map</a></small></div></div>#end
+<div>Id: #field('id')</div>
+<div>Price: #field('price_c')</div>
+<div>Features: #field('features')</div>
+<div>In Stock: #field('inStock')</div>
+<div class="mlt">
+  #set($mlt = $mltResults.get($docId))
+  #set($mltOn = $params.getBool('mlt'))
+  #if($mltOn == true)<div class="field-name">Similar Items</div>#end
+  #if ($mltOn && $mlt && $mlt.size() > 0)
+  <ul>
+    #foreach($mltHit in $mlt)
+      #set($mltId = $mltHit.getFieldValue('id'))
+      <li><div><a href="#url_for_home?q=id:$mltId">$mltId</a></div><div><span class="field-name">Name:</span> $mltHit.getFieldValue('name')</div>
+        <div><span class="field-name">Price:</span> $!number.currency($mltHit.getFieldValue('price')) <span class="field-name">In Stock:</span> $mltHit.getFieldValue('inStock')</div>
+
+      </li>
+    #end
+  </ul>
+  #elseif($mltOn && $mlt.size() == 0)
+    <div>No Similar Items Found</div>
+  #end
+</div>
+#parse('debug.vm')
\ No newline at end of file
diff --git a/solr/example/solr/collection1/conf/velocity/richtext-doc.vm b/solr/example/solr/collection1/conf/velocity/richtext-doc.vm
new file mode 100644
index 0000000..0336818
--- /dev/null
+++ b/solr/example/solr/collection1/conf/velocity/richtext-doc.vm
@@ -0,0 +1,52 @@
+#if($doc.getFieldValue('title'))
+  #set($title = $esc.html($doc.getFirstValue('title')))
+#else
+  #set($title = "["+$doc.getFieldValue('id')+"]")
+#end
+#if($doc.getFieldValue('url'))
+  #set($url = $doc.getFieldValue('url'))
+#elseif($doc.getFieldValue('resourcename'))
+  #set($url = "file:///$doc.getFieldValue('resourcename')")
+#else
+  #set($url = "$doc.getFieldValue('id')")
+#end
+#set($supportedtypes = "7z;ai;aiff;asc;audio;bin;bz2;c;cfc;cfm;chm;class;conf;cpp;cs;css;csv;deb;divx;doc;dot;eml;enc;file;gif;gz;hlp;htm;html;image;iso;jar;java;jpeg;jpg;js;lua;m;mm;mov;mp3;mpg;odc;odf;odg;odi;odp;ods;odt;ogg;pdf;pgp;php;pl;png;ppt;ps;py;ram;rar;rb;rm;rpm;rtf;sig;sql;swf;sxc;sxd;sxi;sxw;tar;tex;tgz;txt;vcf;video;vsd;wav;wma;wmv;xls;xml;xpi;xvid;zip")
+#set($ct = $list.get($doc.getFirstValue('content_type').split(";"),0))
+#set($filename = $doc.getFieldValue('resourcename'))
+#set($filetype = $mimeToExt.get($ct))
+#if(!$filetype)#set($filetype = $filename.substring($filename.lastIndexOf(".")).substring(1))#end
+#if(!$filetype)#set($filetype = "file")#end
+#if(!$supportedtypes.contains($filetype))#set($filetype = "file")#end
+<div class="result-title">
+## Small file type icons from http://www.splitbrain.org/projects/file_icons (public domain)
+<img src="#{url_root}/img/filetypes/${filetype}.png" align="center">
+<a href="${url}" target="_blank"><b>$title</b></a><span class="mlt">   #if($params.getBool('mlt', false) == false)<a href="#lensNoQ&q=id:%22$docId%22&mlt=true">More Like This</a>#end</span></div>
+<div>Id: #field('id')</div>
+<div>
+#if($doc.getFieldValue('resourcename'))Resource name: $filename 
+#elseif($url)URL: $url
+#end
+#if($ct) ($ct)#end
+</div>
+#if($doc.getFieldValue('author'))<div>Author: #field('author')</div>#end
+#if($doc.getFieldValue('last_modified'))<div>Last-modified: #field('last_modified')</div>#end
+<div class="result-body">#field('content')</div>
+<div class="mlt">
+  #set($mlt = $mltResults.get($docId))
+  #set($mltOn = $params.getBool('mlt'))
+  #if($mltOn == true)<div class="field-name">Similar Items</div>#end
+  #if ($mltOn && $mlt && $mlt.size() > 0)
+  <ul>
+    #foreach($mltHit in $mlt)
+      #set($mltId = $mltHit.getFieldValue('id'))
+      <li><div><a href="#url_for_home?q=id:$mltId">$mltId</a></div><div><span class="field-name">Title:</span> $mltHit.getFieldValue('title')</div>
+        <div><span class="field-name">Author:</span> $mltHit.getFieldValue('author') <span class="field-name">Description:</span> $mltHit.getFieldValue('description')</div>
+
+      </li>
+    #end
+  </ul>
+  #elseif($mltOn && $mlt.size() == 0)
+    <div>No Similar Items Found</div>
+  #end
+</div>
+#parse('debug.vm')
\ No newline at end of file
diff --git a/solr/webapp/web/img/filetypes/7z.png b/solr/webapp/web/img/filetypes/7z.png
new file mode 100644
index 0000000..52f7d5d
Binary files /dev/null and b/solr/webapp/web/img/filetypes/7z.png differ
diff --git a/solr/webapp/web/img/filetypes/README b/solr/webapp/web/img/filetypes/README
new file mode 100644
index 0000000..f7a8560
--- /dev/null
+++ b/solr/webapp/web/img/filetypes/README
@@ -0,0 +1,27 @@
+http://www.splitbrain.org/projects/file_icons
+
+Released to the Public Domain
+Free to use. Provided as is. No warranties.
+
+Note: The big majority of icons where created by the creators listed
+      below. Only a few ones where found on the net. They were too
+      widespread to determine the original author and thus were
+      considered public domain.
+      If you are the author of one of those icons just send a short
+      mail to either be included in the list below or have the icon
+      removed from the package.
+
+Creators:
+
+  Andreas Gohr <andi@splitbrain.org>
+  Michael Klier <chi@chimeric.de>
+  Andreas Barton <andreas.barton@web.de>
+  Hubert Chathi <hubert@uhoreg.ca>
+  Johan Koehne <johankohne@gmail.com>
+  Rudi von Staden <rudivs@iafrica.com>
+  Daniel Darvish <ddarvish@hibm.org>
+  Andy Pascall <apascall@engineering.ucsb.edu>
+  Seth <seth.holcomb@gmail.com>
+  David Carella <david.carella@gmail.com>
+  Tom N. Harris <telliamed@fastmail.us>
+  Brandon Carmon Colvin <b.carmon.colvin@gmail.com>
diff --git a/solr/webapp/web/img/filetypes/ai.png b/solr/webapp/web/img/filetypes/ai.png
new file mode 100644
index 0000000..a999762
Binary files /dev/null and b/solr/webapp/web/img/filetypes/ai.png differ
diff --git a/solr/webapp/web/img/filetypes/aiff.png b/solr/webapp/web/img/filetypes/aiff.png
new file mode 100644
index 0000000..82d523f
Binary files /dev/null and b/solr/webapp/web/img/filetypes/aiff.png differ
diff --git a/solr/webapp/web/img/filetypes/asc.png b/solr/webapp/web/img/filetypes/asc.png
new file mode 100644
index 0000000..d9fa4a8
Binary files /dev/null and b/solr/webapp/web/img/filetypes/asc.png differ
diff --git a/solr/webapp/web/img/filetypes/audio.png b/solr/webapp/web/img/filetypes/audio.png
new file mode 100644
index 0000000..9888325
Binary files /dev/null and b/solr/webapp/web/img/filetypes/audio.png differ
diff --git a/solr/webapp/web/img/filetypes/bin.png b/solr/webapp/web/img/filetypes/bin.png
new file mode 100644
index 0000000..fbd174e
Binary files /dev/null and b/solr/webapp/web/img/filetypes/bin.png differ
diff --git a/solr/webapp/web/img/filetypes/bz2.png b/solr/webapp/web/img/filetypes/bz2.png
new file mode 100644
index 0000000..d48cae0
Binary files /dev/null and b/solr/webapp/web/img/filetypes/bz2.png differ
diff --git a/solr/webapp/web/img/filetypes/c.png b/solr/webapp/web/img/filetypes/c.png
new file mode 100644
index 0000000..efe18f4
Binary files /dev/null and b/solr/webapp/web/img/filetypes/c.png differ
diff --git a/solr/webapp/web/img/filetypes/cfc.png b/solr/webapp/web/img/filetypes/cfc.png
new file mode 100644
index 0000000..09c149d
Binary files /dev/null and b/solr/webapp/web/img/filetypes/cfc.png differ
diff --git a/solr/webapp/web/img/filetypes/cfm.png b/solr/webapp/web/img/filetypes/cfm.png
new file mode 100644
index 0000000..d755f28
Binary files /dev/null and b/solr/webapp/web/img/filetypes/cfm.png differ
diff --git a/solr/webapp/web/img/filetypes/chm.png b/solr/webapp/web/img/filetypes/chm.png
new file mode 100644
index 0000000..53d48f3
Binary files /dev/null and b/solr/webapp/web/img/filetypes/chm.png differ
diff --git a/solr/webapp/web/img/filetypes/class.png b/solr/webapp/web/img/filetypes/class.png
new file mode 100644
index 0000000..a39f70c
Binary files /dev/null and b/solr/webapp/web/img/filetypes/class.png differ
diff --git a/solr/webapp/web/img/filetypes/conf.png b/solr/webapp/web/img/filetypes/conf.png
new file mode 100644
index 0000000..ddffe6f
Binary files /dev/null and b/solr/webapp/web/img/filetypes/conf.png differ
diff --git a/solr/webapp/web/img/filetypes/cpp.png b/solr/webapp/web/img/filetypes/cpp.png
new file mode 100644
index 0000000..7946440
Binary files /dev/null and b/solr/webapp/web/img/filetypes/cpp.png differ
diff --git a/solr/webapp/web/img/filetypes/cs.png b/solr/webapp/web/img/filetypes/cs.png
new file mode 100644
index 0000000..d5db29b
Binary files /dev/null and b/solr/webapp/web/img/filetypes/cs.png differ
diff --git a/solr/webapp/web/img/filetypes/css.png b/solr/webapp/web/img/filetypes/css.png
new file mode 100644
index 0000000..0401204
Binary files /dev/null and b/solr/webapp/web/img/filetypes/css.png differ
diff --git a/solr/webapp/web/img/filetypes/csv.png b/solr/webapp/web/img/filetypes/csv.png
new file mode 100644
index 0000000..3a88353
Binary files /dev/null and b/solr/webapp/web/img/filetypes/csv.png differ
diff --git a/solr/webapp/web/img/filetypes/deb.png b/solr/webapp/web/img/filetypes/deb.png
new file mode 100644
index 0000000..9229d87
Binary files /dev/null and b/solr/webapp/web/img/filetypes/deb.png differ
diff --git a/solr/webapp/web/img/filetypes/divx.png b/solr/webapp/web/img/filetypes/divx.png
new file mode 100644
index 0000000..98dab8f
Binary files /dev/null and b/solr/webapp/web/img/filetypes/divx.png differ
diff --git a/solr/webapp/web/img/filetypes/doc.png b/solr/webapp/web/img/filetypes/doc.png
new file mode 100644
index 0000000..932567f
Binary files /dev/null and b/solr/webapp/web/img/filetypes/doc.png differ
diff --git a/solr/webapp/web/img/filetypes/dot.png b/solr/webapp/web/img/filetypes/dot.png
new file mode 100644
index 0000000..9f2da1a
Binary files /dev/null and b/solr/webapp/web/img/filetypes/dot.png differ
diff --git a/solr/webapp/web/img/filetypes/eml.png b/solr/webapp/web/img/filetypes/eml.png
new file mode 100644
index 0000000..02828e1
Binary files /dev/null and b/solr/webapp/web/img/filetypes/eml.png differ
diff --git a/solr/webapp/web/img/filetypes/enc.png b/solr/webapp/web/img/filetypes/enc.png
new file mode 100644
index 0000000..cb2d7d4
Binary files /dev/null and b/solr/webapp/web/img/filetypes/enc.png differ
diff --git a/solr/webapp/web/img/filetypes/file.png b/solr/webapp/web/img/filetypes/file.png
new file mode 100644
index 0000000..24d5f32
Binary files /dev/null and b/solr/webapp/web/img/filetypes/file.png differ
diff --git a/solr/webapp/web/img/filetypes/gif.png b/solr/webapp/web/img/filetypes/gif.png
new file mode 100644
index 0000000..b4c07a9
Binary files /dev/null and b/solr/webapp/web/img/filetypes/gif.png differ
diff --git a/solr/webapp/web/img/filetypes/gz.png b/solr/webapp/web/img/filetypes/gz.png
new file mode 100644
index 0000000..2426bd1
Binary files /dev/null and b/solr/webapp/web/img/filetypes/gz.png differ
diff --git a/solr/webapp/web/img/filetypes/hlp.png b/solr/webapp/web/img/filetypes/hlp.png
new file mode 100644
index 0000000..4417d8e
Binary files /dev/null and b/solr/webapp/web/img/filetypes/hlp.png differ
diff --git a/solr/webapp/web/img/filetypes/htm.png b/solr/webapp/web/img/filetypes/htm.png
new file mode 100644
index 0000000..1a68121
Binary files /dev/null and b/solr/webapp/web/img/filetypes/htm.png differ
diff --git a/solr/webapp/web/img/filetypes/html.png b/solr/webapp/web/img/filetypes/html.png
new file mode 100644
index 0000000..672cbce
Binary files /dev/null and b/solr/webapp/web/img/filetypes/html.png differ
diff --git a/solr/webapp/web/img/filetypes/image.png b/solr/webapp/web/img/filetypes/image.png
new file mode 100644
index 0000000..f83e289
Binary files /dev/null and b/solr/webapp/web/img/filetypes/image.png differ
diff --git a/solr/webapp/web/img/filetypes/iso.png b/solr/webapp/web/img/filetypes/iso.png
new file mode 100644
index 0000000..1b2ff19
Binary files /dev/null and b/solr/webapp/web/img/filetypes/iso.png differ
diff --git a/solr/webapp/web/img/filetypes/jar.png b/solr/webapp/web/img/filetypes/jar.png
new file mode 100644
index 0000000..4db70a2
Binary files /dev/null and b/solr/webapp/web/img/filetypes/jar.png differ
diff --git a/solr/webapp/web/img/filetypes/java.png b/solr/webapp/web/img/filetypes/java.png
new file mode 100644
index 0000000..7489b97
Binary files /dev/null and b/solr/webapp/web/img/filetypes/java.png differ
diff --git a/solr/webapp/web/img/filetypes/jpeg.png b/solr/webapp/web/img/filetypes/jpeg.png
new file mode 100644
index 0000000..aa4cc23
Binary files /dev/null and b/solr/webapp/web/img/filetypes/jpeg.png differ
diff --git a/solr/webapp/web/img/filetypes/jpg.png b/solr/webapp/web/img/filetypes/jpg.png
new file mode 100644
index 0000000..1fb6cc1
Binary files /dev/null and b/solr/webapp/web/img/filetypes/jpg.png differ
diff --git a/solr/webapp/web/img/filetypes/js.png b/solr/webapp/web/img/filetypes/js.png
new file mode 100644
index 0000000..7db4de7
Binary files /dev/null and b/solr/webapp/web/img/filetypes/js.png differ
diff --git a/solr/webapp/web/img/filetypes/lua.png b/solr/webapp/web/img/filetypes/lua.png
new file mode 100644
index 0000000..7c07d02
Binary files /dev/null and b/solr/webapp/web/img/filetypes/lua.png differ
diff --git a/solr/webapp/web/img/filetypes/m.png b/solr/webapp/web/img/filetypes/m.png
new file mode 100644
index 0000000..aa0cbae
Binary files /dev/null and b/solr/webapp/web/img/filetypes/m.png differ
diff --git a/solr/webapp/web/img/filetypes/mm.png b/solr/webapp/web/img/filetypes/mm.png
new file mode 100644
index 0000000..b737571
Binary files /dev/null and b/solr/webapp/web/img/filetypes/mm.png differ
diff --git a/solr/webapp/web/img/filetypes/mov.png b/solr/webapp/web/img/filetypes/mov.png
new file mode 100644
index 0000000..7e7aa36
Binary files /dev/null and b/solr/webapp/web/img/filetypes/mov.png differ
diff --git a/solr/webapp/web/img/filetypes/mp3.png b/solr/webapp/web/img/filetypes/mp3.png
new file mode 100644
index 0000000..928705d
Binary files /dev/null and b/solr/webapp/web/img/filetypes/mp3.png differ
diff --git a/solr/webapp/web/img/filetypes/mpg.png b/solr/webapp/web/img/filetypes/mpg.png
new file mode 100644
index 0000000..9a3f8ea
Binary files /dev/null and b/solr/webapp/web/img/filetypes/mpg.png differ
diff --git a/solr/webapp/web/img/filetypes/odc.png b/solr/webapp/web/img/filetypes/odc.png
new file mode 100644
index 0000000..47f65c8
Binary files /dev/null and b/solr/webapp/web/img/filetypes/odc.png differ
diff --git a/solr/webapp/web/img/filetypes/odf.png b/solr/webapp/web/img/filetypes/odf.png
new file mode 100644
index 0000000..a2fbc51
Binary files /dev/null and b/solr/webapp/web/img/filetypes/odf.png differ
diff --git a/solr/webapp/web/img/filetypes/odg.png b/solr/webapp/web/img/filetypes/odg.png
new file mode 100644
index 0000000..434f182
Binary files /dev/null and b/solr/webapp/web/img/filetypes/odg.png differ
diff --git a/solr/webapp/web/img/filetypes/odi.png b/solr/webapp/web/img/filetypes/odi.png
new file mode 100644
index 0000000..74f6303
Binary files /dev/null and b/solr/webapp/web/img/filetypes/odi.png differ
diff --git a/solr/webapp/web/img/filetypes/odp.png b/solr/webapp/web/img/filetypes/odp.png
new file mode 100644
index 0000000..a5c77f8
Binary files /dev/null and b/solr/webapp/web/img/filetypes/odp.png differ
diff --git a/solr/webapp/web/img/filetypes/ods.png b/solr/webapp/web/img/filetypes/ods.png
new file mode 100644
index 0000000..2ab1273
Binary files /dev/null and b/solr/webapp/web/img/filetypes/ods.png differ
diff --git a/solr/webapp/web/img/filetypes/odt.png b/solr/webapp/web/img/filetypes/odt.png
new file mode 100644
index 0000000..b0c21fc
Binary files /dev/null and b/solr/webapp/web/img/filetypes/odt.png differ
diff --git a/solr/webapp/web/img/filetypes/ogg.png b/solr/webapp/web/img/filetypes/ogg.png
new file mode 100644
index 0000000..62cea6a
Binary files /dev/null and b/solr/webapp/web/img/filetypes/ogg.png differ
diff --git a/solr/webapp/web/img/filetypes/pdf.png b/solr/webapp/web/img/filetypes/pdf.png
new file mode 100644
index 0000000..638066d
Binary files /dev/null and b/solr/webapp/web/img/filetypes/pdf.png differ
diff --git a/solr/webapp/web/img/filetypes/pgp.png b/solr/webapp/web/img/filetypes/pgp.png
new file mode 100644
index 0000000..e6b35f3
Binary files /dev/null and b/solr/webapp/web/img/filetypes/pgp.png differ
diff --git a/solr/webapp/web/img/filetypes/php.png b/solr/webapp/web/img/filetypes/php.png
new file mode 100644
index 0000000..44c0fe0
Binary files /dev/null and b/solr/webapp/web/img/filetypes/php.png differ
diff --git a/solr/webapp/web/img/filetypes/pl.png b/solr/webapp/web/img/filetypes/pl.png
new file mode 100644
index 0000000..ad2324e
Binary files /dev/null and b/solr/webapp/web/img/filetypes/pl.png differ
diff --git a/solr/webapp/web/img/filetypes/png.png b/solr/webapp/web/img/filetypes/png.png
new file mode 100644
index 0000000..f0b5b00
Binary files /dev/null and b/solr/webapp/web/img/filetypes/png.png differ
diff --git a/solr/webapp/web/img/filetypes/ppt.png b/solr/webapp/web/img/filetypes/ppt.png
new file mode 100644
index 0000000..adaefc6
Binary files /dev/null and b/solr/webapp/web/img/filetypes/ppt.png differ
diff --git a/solr/webapp/web/img/filetypes/ps.png b/solr/webapp/web/img/filetypes/ps.png
new file mode 100644
index 0000000..487c3cb
Binary files /dev/null and b/solr/webapp/web/img/filetypes/ps.png differ
diff --git a/solr/webapp/web/img/filetypes/py.png b/solr/webapp/web/img/filetypes/py.png
new file mode 100644
index 0000000..9e31edb
Binary files /dev/null and b/solr/webapp/web/img/filetypes/py.png differ
diff --git a/solr/webapp/web/img/filetypes/ram.png b/solr/webapp/web/img/filetypes/ram.png
new file mode 100644
index 0000000..1a54d76
Binary files /dev/null and b/solr/webapp/web/img/filetypes/ram.png differ
diff --git a/solr/webapp/web/img/filetypes/rar.png b/solr/webapp/web/img/filetypes/rar.png
new file mode 100644
index 0000000..a6af4d1
Binary files /dev/null and b/solr/webapp/web/img/filetypes/rar.png differ
diff --git a/solr/webapp/web/img/filetypes/rb.png b/solr/webapp/web/img/filetypes/rb.png
new file mode 100644
index 0000000..3067016
Binary files /dev/null and b/solr/webapp/web/img/filetypes/rb.png differ
diff --git a/solr/webapp/web/img/filetypes/rm.png b/solr/webapp/web/img/filetypes/rm.png
new file mode 100644
index 0000000..a2db68e
Binary files /dev/null and b/solr/webapp/web/img/filetypes/rm.png differ
diff --git a/solr/webapp/web/img/filetypes/rpm.png b/solr/webapp/web/img/filetypes/rpm.png
new file mode 100644
index 0000000..22212ea
Binary files /dev/null and b/solr/webapp/web/img/filetypes/rpm.png differ
diff --git a/solr/webapp/web/img/filetypes/rtf.png b/solr/webapp/web/img/filetypes/rtf.png
new file mode 100644
index 0000000..d8bada5
Binary files /dev/null and b/solr/webapp/web/img/filetypes/rtf.png differ
diff --git a/solr/webapp/web/img/filetypes/sig.png b/solr/webapp/web/img/filetypes/sig.png
new file mode 100644
index 0000000..3d8b19d
Binary files /dev/null and b/solr/webapp/web/img/filetypes/sig.png differ
diff --git a/solr/webapp/web/img/filetypes/sql.png b/solr/webapp/web/img/filetypes/sql.png
new file mode 100644
index 0000000..f60054a
Binary files /dev/null and b/solr/webapp/web/img/filetypes/sql.png differ
diff --git a/solr/webapp/web/img/filetypes/swf.png b/solr/webapp/web/img/filetypes/swf.png
new file mode 100644
index 0000000..0729ed0
Binary files /dev/null and b/solr/webapp/web/img/filetypes/swf.png differ
diff --git a/solr/webapp/web/img/filetypes/sxc.png b/solr/webapp/web/img/filetypes/sxc.png
new file mode 100644
index 0000000..419c183
Binary files /dev/null and b/solr/webapp/web/img/filetypes/sxc.png differ
diff --git a/solr/webapp/web/img/filetypes/sxd.png b/solr/webapp/web/img/filetypes/sxd.png
new file mode 100644
index 0000000..5801bb2
Binary files /dev/null and b/solr/webapp/web/img/filetypes/sxd.png differ
diff --git a/solr/webapp/web/img/filetypes/sxi.png b/solr/webapp/web/img/filetypes/sxi.png
new file mode 100644
index 0000000..2a94290
Binary files /dev/null and b/solr/webapp/web/img/filetypes/sxi.png differ
diff --git a/solr/webapp/web/img/filetypes/sxw.png b/solr/webapp/web/img/filetypes/sxw.png
new file mode 100644
index 0000000..6da97be
Binary files /dev/null and b/solr/webapp/web/img/filetypes/sxw.png differ
diff --git a/solr/webapp/web/img/filetypes/tar.png b/solr/webapp/web/img/filetypes/tar.png
new file mode 100644
index 0000000..5a2f717
Binary files /dev/null and b/solr/webapp/web/img/filetypes/tar.png differ
diff --git a/solr/webapp/web/img/filetypes/tex.png b/solr/webapp/web/img/filetypes/tex.png
new file mode 100644
index 0000000..e46a516
Binary files /dev/null and b/solr/webapp/web/img/filetypes/tex.png differ
diff --git a/solr/webapp/web/img/filetypes/tgz.png b/solr/webapp/web/img/filetypes/tgz.png
new file mode 100644
index 0000000..141acf5
Binary files /dev/null and b/solr/webapp/web/img/filetypes/tgz.png differ
diff --git a/solr/webapp/web/img/filetypes/txt.png b/solr/webapp/web/img/filetypes/txt.png
new file mode 100644
index 0000000..da20009
Binary files /dev/null and b/solr/webapp/web/img/filetypes/txt.png differ
diff --git a/solr/webapp/web/img/filetypes/vcf.png b/solr/webapp/web/img/filetypes/vcf.png
new file mode 100644
index 0000000..195ab38
Binary files /dev/null and b/solr/webapp/web/img/filetypes/vcf.png differ
diff --git a/solr/webapp/web/img/filetypes/video.png b/solr/webapp/web/img/filetypes/video.png
new file mode 100644
index 0000000..b89fc52
Binary files /dev/null and b/solr/webapp/web/img/filetypes/video.png differ
diff --git a/solr/webapp/web/img/filetypes/vsd.png b/solr/webapp/web/img/filetypes/vsd.png
new file mode 100644
index 0000000..d14b81d
Binary files /dev/null and b/solr/webapp/web/img/filetypes/vsd.png differ
diff --git a/solr/webapp/web/img/filetypes/wav.png b/solr/webapp/web/img/filetypes/wav.png
new file mode 100644
index 0000000..79e8076
Binary files /dev/null and b/solr/webapp/web/img/filetypes/wav.png differ
diff --git a/solr/webapp/web/img/filetypes/wma.png b/solr/webapp/web/img/filetypes/wma.png
new file mode 100644
index 0000000..6854de7
Binary files /dev/null and b/solr/webapp/web/img/filetypes/wma.png differ
diff --git a/solr/webapp/web/img/filetypes/wmv.png b/solr/webapp/web/img/filetypes/wmv.png
new file mode 100644
index 0000000..b26f45d
Binary files /dev/null and b/solr/webapp/web/img/filetypes/wmv.png differ
diff --git a/solr/webapp/web/img/filetypes/xls.png b/solr/webapp/web/img/filetypes/xls.png
new file mode 100644
index 0000000..e8cd58d
Binary files /dev/null and b/solr/webapp/web/img/filetypes/xls.png differ
diff --git a/solr/webapp/web/img/filetypes/xml.png b/solr/webapp/web/img/filetypes/xml.png
new file mode 100644
index 0000000..eb46323
Binary files /dev/null and b/solr/webapp/web/img/filetypes/xml.png differ
diff --git a/solr/webapp/web/img/filetypes/xpi.png b/solr/webapp/web/img/filetypes/xpi.png
new file mode 100644
index 0000000..5e537e2
Binary files /dev/null and b/solr/webapp/web/img/filetypes/xpi.png differ
diff --git a/solr/webapp/web/img/filetypes/xvid.png b/solr/webapp/web/img/filetypes/xvid.png
new file mode 100644
index 0000000..d8429dc
Binary files /dev/null and b/solr/webapp/web/img/filetypes/xvid.png differ
diff --git a/solr/webapp/web/img/filetypes/zip.png b/solr/webapp/web/img/filetypes/zip.png
new file mode 100644
index 0000000..999ffbe
Binary files /dev/null and b/solr/webapp/web/img/filetypes/zip.png differ

